import{u as G,q as S,h as I,r as k,N as R,j as e,a as n,cC as z,_ as l,cD as D,aI as F,af as B,cE as K,aJ as O,z as P}from"./main-chatty-months-shout.js";import{u as U}from"./usedebou-chatty-months-shout-812.js";import{I as E}from"./index-chatty-months-shout-138.js";import{R as u,C as o,e as g,P as p,T as J}from"./index-chatty-months-shout-83.js";import{a as Q}from"./index.es-chatty-months-shout-658.js";import{S as L}from"./index-chatty-months-shout-115.js";import{T as H}from"./index-chatty-months-shout-719.js";import{C as V}from"./index-chatty-months-shout-349.js";import{T as W}from"./index-chatty-months-shout-37.js";import"./lodash-chatty-months-shout-731.js";import"./index-chatty-months-shout-289.js";import"./useclosa-chatty-months-shout-441.js";import"./index-chatty-months-shout-513.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};function X(){return G({queryFn:()=>S("global-settings",void 0,void 0,"GET"),queryKey:["global-settings"],select:a=>a.data})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};function Y(){return I({mutationFn:a=>S("global-settings/update",a),mutationKey:["update-global-settings"]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};function Z(){var C,T,w,_,N,j,x,A,M;const{data:a,isLoading:t}=X(),{error:s,isPending:f,mutateAsync:y}=Y(),[i,m]=Q(a),{messageApi:r}=k.useContext(R),q=U(async c=>{await y(c),r==null||r.success(l("Settings updated successfully"))},500),b=async(c,h)=>{m(d=>{d&&(d[c]=h)}),await y({[c]:h}),r==null||r.success(l("Settings updated successfully"))},v=(c,h)=>{m(d=>{d&&(d[c]=h)}),q({[c]:h})};return k.useEffect(()=>{a&&m(a)},[a,m]),e(u,{children:e(o,{lg:{span:16},children:n(V,{className:"bg-transparent",children:[n(u,{gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(z,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Notification of Failed Tasks")}),e(p,{type:"secondary",children:l("To receive notification of failed task, this email will be used.")})]})]})}),e(o,{span:8,children:e(L,{checked:i==null?void 0:i.notify_user,disabled:t||f,loading:t,onChange:c=>b("notify_user",c)})})]}),(i==null?void 0:i.notify_user)&&n(u,{className:"mt-2",gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e("span",{className:"w-6"}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Notification Email")}),e(p,{type:"secondary",children:l("To receive notification of failed task, this email will be used.")})]})]})}),e(o,{span:8,children:e(E,{disabled:t,invalidMessage:(T=(C=s==null?void 0:s.data)==null?void 0:C.notification_email)==null?void 0:T[0],onChange:c=>v("notification_email",c.target.value),status:((w=s==null?void 0:s.data)==null?void 0:w.notification_email)&&"error",type:"email",value:i==null?void 0:i.notification_email})})]}),n(u,{className:"mt-2",gutter:20,justify:"space-between",children:[e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(D,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[e(g,{level:5,style:{marginBottom:0},children:l("Preserve Flow Logs")}),e(p,{type:"secondary",children:l("Enter the number of days to retain task logs. For example, entering 30 will remove task history older than 30 days.")})]})]})}),e(o,{span:8,children:e(E,{addonAfter:l("days"),disabled:t,invalidMessage:(N=(_=s==null?void 0:s.data)==null?void 0:_.preserve_logs)==null?void 0:N[0],min:0,onChange:c=>v("preserve_logs",c.target.valueAsNumber),status:((j=s==null?void 0:s.data)==null?void 0:j.preserve_logs)&&"error",type:"number",value:i==null?void 0:i.preserve_logs})})]}),n(u,{className:F("mt-2","cursor-not-allowed opacity-80"),gutter:20,justify:"space-between",children:[e(B,{title:l("This feature is planned and will be available in the future."),children:e(o,{span:16,children:n("div",{className:"flex items-start gap-3",children:[e(K,{className:"mt-0.5 shrink-0 text-slate-500",size:20}),n("div",{children:[n("div",{className:"flex gap-2",children:[e(g,{className:F("mb-0","text-slate-400"),level:5,children:l("Cloud based cron runner")}),e(H,{color:"orange",icon:e(O,{}),children:l("Pro Feature")})]}),e(p,{type:"secondary",children:l("Enable this option to trigger cron jobs from the cloud, ensuring they run more accurately.")})]})]})})}),n(o,{span:8,children:[e(L,{disabled:!P.IS_PRO||t||f,loading:P.IS_PRO&&t,onChange:c=>b("use_cloud_cron",c),value:i==null?void 0:i.use_cloud_cron}),((x=s==null?void 0:s.data)==null?void 0:x.use_cloud_cron)&&e(J.Text,{className:"inline-block",type:"danger",children:(M=(A=s==null?void 0:s.data)==null?void 0:A.use_cloud_cron)==null?void 0:M[0]})]})]})]})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};const $=[{children:e(Z,{}),key:"1",label:l("Flow Settings")}];function me(){return e("div",{className:"p-6",children:e(W,{defaultActiveKey:"1",items:$,tabPosition:"top"})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};export{me as default};

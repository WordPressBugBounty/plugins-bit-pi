import{d as F,r as w,j as s,F as T,_ as M,a as m,S as A,B as v,L as I,o as O,C as y,t as q,m as B,l as R}from"./main-chatty-months-shout.js";import{q as z,N as C}from"./_applist-chatty-months-shout-814.js";import{N as D}from"./appheade-chatty-months-shout-709.js";import{L as P,o as $,n as G,v as L,d as H,C as J,E as K}from"./index-chatty-months-shout-30.js";import{M as j}from"./index-chatty-months-shout-783.js";import{S as k}from"./index-chatty-months-shout-585.js";import{F as Q}from"./index-chatty-months-shout-621.js";import{R as U,C as N,T as _}from"./index-chatty-months-shout-83.js";import"./lodash-chatty-months-shout-731.js";import"./index-chatty-months-shout-719.js";import"./useclosa-chatty-months-shout-441.js";import"./exporthe-chatty-months-shout-341.js";import"./index-chatty-months-shout-617.js";import"./index-chatty-months-shout-969.js";import"./import-chatty-months-shout-469.js";import"./usebreak-chatty-months-shout-719.js";import"./index-chatty-months-shout-289.js";import"./dropdown-chatty-months-shout-782.js";import"./index-chatty-months-shout-513.js";import"./index.es-chatty-months-shout-658.js";import"./paginati-chatty-months-shout-250.js";import"./index-chatty-months-shout-629.js";import"./index-chatty-months-shout-813.js";import"./utilscss-chatty-months-shout-874.js";import"./index-chatty-months-shout-37.js";import"./index-chatty-months-shout-349.js";import"./usedebou-chatty-months-shout-812.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(i,n){return this.cache.has(i)?this.cache.get(i):(this.cache.set(i,n),n)}};var V={name:"19hpbzq",styles:"margin:6px 0 !important"},W={name:"1dftezk",styles:"max-width:150px;min-width:150px"},X={name:"ozd7xs",styles:"flex-shrink:0"},Y={name:"6dhm9o",styles:"visibility:hidden"};function Z({conditionId:i,nodeId:n}){const[d,c]=F(z(n)),x=()=>{var o,e;const t=(e=(o=d==null?void 0:d.states)==null?void 0:o.conditions)==null?void 0:e.find(r=>r.id===i);return!t||t.type===C.defaultConditionLogic?[]:t.condition},g=w.useMemo(x,[d,i]),h=(t,o,e)=>{c(r=>y(r,l=>{var E,b;const a=(b=(E=l.states)==null?void 0:E.conditions)==null?void 0:b.find(S=>S.id===i);if(!a||a.type===C.defaultConditionLogic)return;const p=a.condition[o];p.type==="logical-operator"?p.value=t:e==="leftExp"?p.leftExp=t:e==="operator"?p.operator=t:e==="rightExp"&&(p.rightExp=t)}))},u=t=>()=>{c(o=>y(o,e=>{var l,a;const r=(a=(l=e.states)==null?void 0:l.conditions)==null?void 0:a.find(p=>p.id===i);!r||r.type===C.defaultConditionLogic||r.condition.splice(t+1,0,{id:L(),...G},{id:L(),...H})}))},f=t=>()=>{c(o=>y(o,e=>{var l,a;const r=(a=(l=e.states)==null?void 0:l.conditions)==null?void 0:a.find(p=>p.id===i);!r||r.type===C.defaultConditionLogic||r.condition.splice(t-1,2)}))};return i?s(T,{children:g.map((t,o)=>m("div",{children:[t.type==="logical-operator"&&s(k,{css:V,onChange:e=>h(e,o,"logicalOperator"),options:P,value:t.value}),t.type==="logic"&&m(Q,{align:"middle",gap:6,children:[s(j,{onChange:e=>h(e,o,"leftExp"),value:t.leftExp,wrapperClassName:"w-100"}),s(k,{css:W,dropdownStyle:{width:300},onChange:e=>h(e,o,"operator"),options:$,showSearch:!0,value:t.operator}),s(j,{onChange:e=>h(e,o,"rightExp"),value:t.rightExp,wrapperClassName:"w-100"}),m(A,{css:X,size:6,children:[s(v,{icon:s(I,{}),onClick:u(o),shape:"circle"}),o===0?s(v,{css:Y}):s(v,{danger:!0,icon:s(O,{}),onClick:f(o),shape:"circle"})]})]})]},t.id))}):s(T,{children:M("Condition ID Missing")})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(i,n){return this.cache.has(i)?this.cache.get(i):(this.cache.set(i,n),n)}};const Nt=w.memo(tt);function tt({conditionId:i,nodeId:n}){var u;const{token:d}=q.useToken(),[c,x]=F(z(n)),g=w.useMemo(()=>{var f,t;return((t=(f=c==null?void 0:c.states)==null?void 0:f.conditions)==null?void 0:t.find(o=>o.id===i))||{}},[i,(u=c==null?void 0:c.states)==null?void 0:u.conditions]),h=f=>{x(t=>y(t,o=>{var r,l;const e=(l=(r=o.states)==null?void 0:r.conditions)==null?void 0:l.find(a=>a.id===i);e&&(e.title=f)}))};return m(T,{children:[m("div",{className:"mb-4",children:[s(D,{}),m(U,{align:"middle",gutter:15,children:[s(N,{flex:"none",children:s("div",{className:B(["flex size-12 items-center justify-center rounded-md bg-slate-200 dark:bg-gray-900"]),children:s(J,{size:"2.5rem",stroke:1})})}),m(N,{flex:"auto",children:[s(_.Title,{className:"mb-0",editable:{icon:s(K,{css:R({color:d.colorText},"","")}),onChange:h,triggerType:["icon","text"]},level:5,children:g==null?void 0:g.title}),s(_.Text,{type:"secondary",children:M("Conditional Logic")})]})]})]}),s(Z,{conditionId:i,nodeId:n})]})}export{Nt as default};

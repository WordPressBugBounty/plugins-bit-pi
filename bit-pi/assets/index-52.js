import{r as c,a3 as se,Z as me,Y as Z,W as kt,K as re,X as Te,ac as Ce,b as lt,ab as at,P as Ke,$ as xa,ad as At,R as Nt,bC as ka,bt as Aa,af as Tt,ag as Na,aj as Ta,bR as Ia,d9 as Pa,bT as It,ar as nt,an as Pt,bS as Oa,bu as Ea,ap as _a,bl as Ma,cA as vt,g as Ot,q as Et,aG as qe,v as Se,av as ct,c as _t,a as V,j as r,aA as Mt,x as ae,B as ye,_ as N,da as Ra,S as ut,b5 as $a,aR as tt,db as Da,F as dt,ae as Be,au as Rt,p as ht,t as La,i as Va,l as Ne,dc as ja,cj as Wa,y as $t,dd as Dt,de as Fa,aI as Ha,e as za,D as Ka,aH as Ba,aB as Lt,s as Ua,b9 as qa,df as Xa,dg as Ga,aV as Qa}from"./main-salty-geckos-sort.js";import{m as ft,D as de,a2 as Ja,k as Ya,Y as Za,f as en,K as tn,l as an}from"./_applist-869.js";import{I as Vt,C as nn,R as rn}from"./index-550.js";import{u as on}from"./usewebho-688.js";import{u as sn,f as ln,a as cn,J as bt,b as jt,A as he,S as un,c as Wt,F as dn,d as hn}from"./index-807.js";import{c as pt}from"./mutative-523.js";import{c as fn,a as rt,V as Ct,R as ze,M as pn}from"./import-685.js";import{x as mn,y as gn,z as vn,T as oe,R as bn,S as yt}from"./index-997.js";import{S as Ft}from"./index-431.js";import{u as Cn}from"./utilscss-945.js";import{I as Ht}from"./index-509.js";import{P as zt}from"./index-498.js";import{F as yn}from"./index-325.js";import{g as Sn,F as Kt}from"./index-489.js";import{M as wn}from"./index-628.js";import{u as xn}from"./usedebou-5.js";import{l as Bt}from"./links-955.js";import{T as We}from"./index-882.js";import{I as kn}from"./index-40.js";import{u as An,b as Nn,B as Tn,D as Ut,c as In,d as Pn,e as On,m as En,g as _n}from"./index-888.js";import"./lodash-621.js";import"./oauthhel-532.js";import"./index.es-477.js";import"./index-656.js";import"./index-705.js";import"./col-480.js";import"./dropdown-4.js";import"./index-379.js";import"./usebreak-169.js";import"./paginati-916.js";import"./extendso-11.js";import"./index-704.js";import"./useclosa-449.js";var _e=c.createContext({}),Pe="__rc_cascader_search_mark__",Mn=function(t,a,n){var o=n.label,s=o===void 0?"":o;return a.some(function(l){return String(l[s]).toLowerCase().includes(t.toLowerCase())})},Rn=function(t,a,n,o){return a.map(function(s){return s[o.label]}).join(" / ")},$n=function(t,a,n,o,s,l){var i=s.filter,u=i===void 0?Mn:i,h=s.render,C=h===void 0?Rn:h,g=s.limit,v=g===void 0?50:g,d=s.sort;return c.useMemo(function(){var S=[];if(!t)return[];function m(y,f){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;y.forEach(function(p){if(!(!d&&v!==!1&&v>0&&S.length>=v)){var x=[].concat(se(f),[p]),T=p[n.children],A=b||p.disabled;if((!T||T.length===0||l)&&u(t,x,{label:n.label})){var k;S.push(me(me({},p),{},(k={disabled:A},Z(k,n.label,C(t,x,o,n)),Z(k,Pe,x),Z(k,n.children,void 0),k)))}T&&m(p[n.children],x,A)}})}return m(a,[]),d&&S.sort(function(y,f){return d(y[Pe],f[Pe],t,n)}),v!==!1&&v>0?S.slice(0,v):S},[t,a,n,o,C,l,u,d,v])},mt="__RC_CASCADER_SPLIT__",qt="SHOW_PARENT",Xt="SHOW_CHILD";function fe(e){return e.join(mt)}function Oe(e){return e.map(fe)}function Dn(e){return e.split(mt)}function Gt(e){var t=e||{},a=t.label,n=t.value,o=t.children,s=n||"value";return{label:a||"label",value:s,key:s,children:o||"children"}}function je(e,t){var a,n;return(a=e.isLeaf)!==null&&a!==void 0?a:!((n=e[t.children])!==null&&n!==void 0&&n.length)}function Ln(e){var t=e.parentElement;if(t){var a=e.offsetTop-t.offsetTop;a-t.scrollTop<0?t.scrollTo({top:a}):a+e.offsetHeight-t.scrollTop>t.offsetHeight&&t.scrollTo({top:a+e.offsetHeight-t.offsetHeight})}}function Qt(e,t){return e.map(function(a){var n;return(n=a[Pe])===null||n===void 0?void 0:n.map(function(o){return o[t.value]})})}function Vn(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ue(e){return e?Vn(e)?e:(e.length===0?[]:[e]).map(function(t){return Array.isArray(t)?t:[t]}):[]}function Jt(e,t,a){var n=new Set(e),o=t();return e.filter(function(s){var l=o[s],i=l?l.parent:null,u=l?l.children:null;return l&&l.node.disabled?!0:a===Xt?!(u&&u.some(function(h){return h.key&&n.has(h.key)})):!(i&&!i.node.disabled&&n.has(i.key))})}function Ee(e,t,a){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=t,s=[],l=function(){var h,C,g,v=e[i],d=(h=o)===null||h===void 0?void 0:h.findIndex(function(m){var y=m[a.value];return n?String(y)===String(v):y===v}),S=d!==-1?(C=o)===null||C===void 0?void 0:C[d]:null;s.push({value:(g=S==null?void 0:S[a.value])!==null&&g!==void 0?g:v,index:d,option:S}),o=S==null?void 0:S[a.children]},i=0;i<e.length;i+=1)l();return s}const jn=(function(e,t,a,n,o){return c.useMemo(function(){var s=o||function(l){var i=n?l.slice(-1):l,u=" / ";return i.every(function(h){return["string","number"].includes(kt(h))})?i.join(u):i.reduce(function(h,C,g){var v=c.isValidElement(C)?c.cloneElement(C,{key:g}):C;return g===0?[v]:[].concat(se(h),[u,v])},[])};return e.map(function(l){var i,u=Ee(l,t,a),h=s(u.map(function(g){var v,d=g.option,S=g.value;return(v=d==null?void 0:d[a.label])!==null&&v!==void 0?v:S}),u.map(function(g){var v=g.option;return v})),C=fe(l);return{label:h,value:C,key:C,valueCells:l,disabled:(i=u[u.length-1])===null||i===void 0||(i=i.option)===null||i===void 0?void 0:i.disabled}})},[e,t,a,o,n])});function Yt(e,t){return c.useCallback(function(a){var n=[],o=[];return a.forEach(function(s){var l=Ee(s,e,t);l.every(function(i){return i.option})?o.push(s):n.push(s)}),[o,n]},[e,t])}const Wn=(function(e,t){var a=c.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}}),n=c.useCallback(function(){return a.current.options!==e&&(a.current.options=e,a.current.info=fn(e,{fieldNames:t,initWrapper:function(s){return me(me({},s),{},{pathKeyEntities:{}})},processEntity:function(s,l){var i=s.nodes.map(function(u){return u[t.value]}).join(mt);l.pathKeyEntities[i]=s,s.key=i}})),a.current.info.pathKeyEntities},[t,e]);return n});function Zt(e,t){var a=c.useMemo(function(){return t||[]},[t]),n=Wn(a,e),o=c.useCallback(function(s){var l=n();return s.map(function(i){var u=l[i].nodes;return u.map(function(h){return h[e.value]})})},[n,e]);return[a,n,o]}function Fn(e){return c.useMemo(function(){if(!e)return[!1,{}];var t={matchInputWidth:!0,limit:50};return e&&kt(e)==="object"&&(t=me(me({},t),e)),t.limit<=0&&(t.limit=!1),[!0,t]},[e])}function ea(e,t,a,n,o,s,l,i){return function(u){if(!e)t(u);else{var h=fe(u),C=Oe(a),g=Oe(n),v=C.includes(h),d=o.some(function(A){return fe(A)===h}),S=a,m=o;if(d&&!v)m=o.filter(function(A){return fe(A)!==h});else{var y=v?C.filter(function(A){return A!==h}):[].concat(se(C),[h]),f=s(),b;if(v){var p=rt(y,{halfCheckedKeys:g},f);b=p.checkedKeys}else{var x=rt(y,!0,f);b=x.checkedKeys}var T=Jt(b,s,i);S=l(T)}t([].concat(se(m),se(S)))}}}function ta(e,t,a,n,o){return c.useMemo(function(){var s=o(t),l=re(s,2),i=l[0],u=l[1];if(!e||!t.length)return[i,[],u];var h=Oe(i),C=a(),g=rt(h,!0,C),v=g.checkedKeys,d=g.halfCheckedKeys;return[n(v),n(d),u]},[e,t,a,n,o])}var Hn=c.memo(function(e){var t=e.children;return t},function(e,t){return!t.open});function zn(e){var t,a=e.prefixCls,n=e.checked,o=e.halfChecked,s=e.disabled,l=e.onClick,i=e.disableCheckbox,u=c.useContext(_e),h=u.checkable,C=typeof h!="boolean"?h:null;return c.createElement("span",{className:Te("".concat(a),(t={},Z(t,"".concat(a,"-checked"),n),Z(t,"".concat(a,"-indeterminate"),!n&&o),Z(t,"".concat(a,"-disabled"),s||i),t)),onClick:l},C)}var aa="__cascader_fix_label__";function Kn(e){var t=e.prefixCls,a=e.multiple,n=e.options,o=e.activeValue,s=e.prevValuePath,l=e.onToggleOpen,i=e.onSelect,u=e.onActive,h=e.checkedSet,C=e.halfCheckedSet,g=e.loadingKeys,v=e.isSelectable,d=e.disabled,S="".concat(t,"-menu"),m="".concat(t,"-menu-item"),y=c.useContext(_e),f=y.fieldNames,b=y.changeOnSelect,p=y.expandTrigger,x=y.expandIcon,T=y.loadingIcon,A=y.dropdownMenuColumnStyle,k=y.optionRender,I=p==="hover",O=function(_){return d||_},W=c.useMemo(function(){return n.map(function(w){var _,E=w.disabled,$=w.disableCheckbox,z=w[Pe],M=(_=w[aa])!==null&&_!==void 0?_:w[f.label],D=w[f.value],B=je(w,f),X=z?z.map(function(te){return te[f.value]}):[].concat(se(s),[D]),L=fe(X),R=g.includes(L),F=h.has(L),U=C.has(L);return{disabled:E,label:M,value:D,isLeaf:B,isLoading:R,checked:F,halfChecked:U,option:w,disableCheckbox:$,fullPath:X,fullPathKey:L}})},[n,h,f,C,g,s]);return c.createElement("ul",{className:S,role:"menu"},W.map(function(w){var _,E=w.disabled,$=w.label,z=w.value,M=w.isLeaf,D=w.isLoading,B=w.checked,X=w.halfChecked,L=w.option,R=w.fullPath,F=w.fullPathKey,U=w.disableCheckbox,te=function(){if(!O(E)){var Y=se(R);I&&M&&Y.pop(),u(Y)}},ee=function(){v(L)&&!O(E)&&i(R,M)},q;return typeof L.title=="string"?q=L.title:typeof $=="string"&&(q=$),c.createElement("li",{key:F,className:Te(m,(_={},Z(_,"".concat(m,"-expand"),!M),Z(_,"".concat(m,"-active"),o===z||o===F),Z(_,"".concat(m,"-disabled"),O(E)),Z(_,"".concat(m,"-loading"),D),_)),style:A,role:"menuitemcheckbox",title:q,"aria-checked":B,"data-path-key":F,onClick:function(){te(),!U&&(!a||M)&&ee()},onDoubleClick:function(){b&&l(!1)},onMouseEnter:function(){I&&te()},onMouseDown:function(Y){Y.preventDefault()}},a&&c.createElement(zn,{prefixCls:"".concat(t,"-checkbox"),checked:B,halfChecked:X,disabled:O(E)||U,disableCheckbox:U,onClick:function(Y){U||(Y.stopPropagation(),ee())}}),c.createElement("div",{className:"".concat(m,"-content")},k?k(L):$),!D&&x&&!M&&c.createElement("div",{className:"".concat(m,"-expand-icon")},x),D&&T&&c.createElement("div",{className:"".concat(m,"-loading-icon")},T))}))}var Bn=function(t,a){var n=c.useContext(_e),o=n.values,s=o[0],l=c.useState([]),i=re(l,2),u=i[0],h=i[1];return c.useEffect(function(){t||h(s||[])},[a,s]),[u,h]};const Un=(function(e,t,a,n,o,s,l){var i=l.direction,u=l.searchValue,h=l.toggleOpen,C=l.open,g=i==="rtl",v=c.useMemo(function(){for(var A=-1,k=t,I=[],O=[],W=n.length,w=Qt(t,a),_=function(D){var B=k.findIndex(function(X,L){return(w[L]?fe(w[L]):X[a.value])===n[D]});if(B===-1)return 1;A=B,I.push(A),O.push(n[D]),k=k[A][a.children]},E=0;E<W&&k&&!_(E);E+=1);for(var $=t,z=0;z<I.length-1;z+=1)$=$[I[z]][a.children];return[O,A,$,w]},[n,a,t]),d=re(v,4),S=d[0],m=d[1],y=d[2],f=d[3],b=function(k){o(k)},p=function(k){var I=y.length,O=m;O===-1&&k<0&&(O=I);for(var W=0;W<I;W+=1){O=(O+k+I)%I;var w=y[O];if(w&&!w.disabled){var _=S.slice(0,-1).concat(f[O]?fe(f[O]):w[a.value]);b(_);return}}},x=function(){if(S.length>1){var k=S.slice(0,-1);b(k)}else h(!1)},T=function(){var k,I=((k=y[m])===null||k===void 0?void 0:k[a.children])||[],O=I.find(function(w){return!w.disabled});if(O){var W=[].concat(se(S),[O[a.value]]);b(W)}};c.useImperativeHandle(e,function(){return{onKeyDown:function(k){var I=k.which;switch(I){case Ce.UP:case Ce.DOWN:{var O=0;I===Ce.UP?O=-1:I===Ce.DOWN&&(O=1),O!==0&&p(O);break}case Ce.LEFT:{if(u)break;g?T():x();break}case Ce.RIGHT:{if(u)break;g?x():T();break}case Ce.BACKSPACE:{u||x();break}case Ce.ENTER:{if(S.length){var W=y[m],w=(W==null?void 0:W[Pe])||[];w.length?s(w.map(function(_){return _[a.value]}),w[w.length-1]):s(S,y[m])}break}case Ce.ESC:h(!1),C&&k.stopPropagation()}},onKeyUp:function(){}}})});var na=c.forwardRef(function(e,t){var a,n,o,s=e.prefixCls,l=e.multiple,i=e.searchValue,u=e.toggleOpen,h=e.notFoundContent,C=e.direction,g=e.open,v=e.disabled,d=c.useRef(null),S=C==="rtl",m=c.useContext(_e),y=m.options,f=m.values,b=m.halfValues,p=m.fieldNames,x=m.changeOnSelect,T=m.onSelect,A=m.searchOptions,k=m.dropdownPrefixCls,I=m.loadData,O=m.expandTrigger,W=k||s,w=c.useState([]),_=re(w,2),E=_[0],$=_[1],z=function(P){if(!(!I||i)){var j=Ee(P,y,p),H=j.map(function(ie){var ce=ie.option;return ce}),G=H[H.length-1];if(G&&!je(G,p)){var le=fe(P);$(function(ie){return[].concat(se(ie),[le])}),I(H)}}};c.useEffect(function(){E.length&&E.forEach(function(K){var P=Dn(K),j=Ee(P,y,p,!0).map(function(G){var le=G.option;return le}),H=j[j.length-1];(!H||H[p.children]||je(H,p))&&$(function(G){return G.filter(function(le){return le!==K})})})},[y,E,p]);var M=c.useMemo(function(){return new Set(Oe(f))},[f]),D=c.useMemo(function(){return new Set(Oe(b))},[b]),B=Bn(l,g),X=re(B,2),L=X[0],R=X[1],F=function(P){R(P),z(P)},U=function(P){if(v)return!1;var j=P.disabled,H=je(P,p);return!j&&(H||x||l)},te=function(P,j){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;T(P),!l&&(j||x&&(O==="hover"||H))&&u(!1)},ee=c.useMemo(function(){return i?A:y},[i,A,y]),q=c.useMemo(function(){for(var K=[{options:ee}],P=ee,j=Qt(P,p),H=function(){var ie=L[G],ce=P.find(function(Re,we){return(j[we]?fe(j[we]):Re[p.value])===ie}),be=ce==null?void 0:ce[p.children];if(!(be!=null&&be.length))return 1;P=be,K.push({options:be})},G=0;G<L.length&&!H();G+=1);return K},[ee,L,p]),J=function(P,j){U(j)&&te(P,je(j,p),!0)};Un(t,ee,p,L,F,J,{direction:C,searchValue:i,toggleOpen:u,open:g}),c.useEffect(function(){if(!i)for(var K=0;K<L.length;K+=1){var P,j=L.slice(0,K+1),H=fe(j),G=(P=d.current)===null||P===void 0?void 0:P.querySelector('li[data-path-key="'.concat(H.replace(/\\{0,2}"/g,'\\"'),'"]'));G&&Ln(G)}},[L,i]);var Y=!((a=q[0])!==null&&a!==void 0&&(a=a.options)!==null&&a!==void 0&&a.length),pe=[(n={},Z(n,p.value,"__EMPTY__"),Z(n,aa,h),Z(n,"disabled",!0),n)],ge=me(me({},e),{},{multiple:!Y&&l,onSelect:te,onActive:F,onToggleOpen:u,checkedSet:M,halfCheckedSet:D,loadingKeys:E,isSelectable:U}),Q=Y?[{options:pe}]:q,ve=Q.map(function(K,P){var j=L.slice(0,P),H=L[P];return c.createElement(Kn,lt({key:P},ge,{prefixCls:W,options:K.options,prevValuePath:j,activeValue:H}))});return c.createElement(Hn,{open:g},c.createElement("div",{className:Te("".concat(W,"-menus"),(o={},Z(o,"".concat(W,"-menu-empty"),Y),Z(o,"".concat(W,"-rtl"),S),o)),ref:d},ve))}),qn=c.forwardRef(function(e,t){var a=An();return c.createElement(na,lt({},e,a,{ref:t}))});function Xn(){}function ra(e){var t,a=e,n=a.prefixCls,o=n===void 0?"rc-cascader":n,s=a.style,l=a.className,i=a.options,u=a.checkable,h=a.defaultValue,C=a.value,g=a.fieldNames,v=a.changeOnSelect,d=a.onChange,S=a.showCheckedStrategy,m=a.loadData,y=a.expandTrigger,f=a.expandIcon,b=f===void 0?">":f,p=a.loadingIcon,x=a.direction,T=a.notFoundContent,A=T===void 0?"Not Found":T,k=a.disabled,I=!!u,O=at(h,{value:C,postState:Ue}),W=re(O,2),w=W[0],_=W[1],E=c.useMemo(function(){return Gt(g)},[JSON.stringify(g)]),$=Zt(E,i),z=re($,3),M=z[0],D=z[1],B=z[2],X=Yt(M,E),L=ta(I,w,D,B,X),R=re(L,3),F=R[0],U=R[1],te=R[2],ee=Ke(function(Q){if(_(Q),d){var ve=Ue(Q),K=ve.map(function(H){return Ee(H,M,E).map(function(G){return G.option})}),P=I?ve:ve[0],j=I?K:K[0];d(P,j)}}),q=ea(I,ee,F,U,te,D,B,S),J=Ke(function(Q){q(Q)}),Y=c.useMemo(function(){return{options:M,fieldNames:E,values:F,halfValues:U,changeOnSelect:v,onSelect:J,checkable:u,searchOptions:[],dropdownPrefixCls:void 0,loadData:m,expandTrigger:y,expandIcon:b,loadingIcon:p,dropdownMenuColumnStyle:void 0}},[M,E,F,U,v,J,u,m,y,b,p]),pe="".concat(o,"-panel"),ge=!M.length;return c.createElement(_e.Provider,{value:Y},c.createElement("div",{className:Te(pe,(t={},Z(t,"".concat(pe,"-rtl"),x==="rtl"),Z(t,"".concat(pe,"-empty"),ge),t),l),style:s},ge?A:c.createElement(na,{prefixCls:o,searchValue:"",multiple:I,toggleOpen:Xn,open:!0,direction:x,disabled:k})))}var Gn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],Fe=c.forwardRef(function(e,t){var a=e.id,n=e.prefixCls,o=n===void 0?"rc-cascader":n,s=e.fieldNames,l=e.defaultValue,i=e.value,u=e.changeOnSelect,h=e.onChange,C=e.displayRender,g=e.checkable,v=e.autoClearSearchValue,d=v===void 0?!0:v,S=e.searchValue,m=e.onSearch,y=e.showSearch,f=e.expandTrigger,b=e.options,p=e.dropdownPrefixCls,x=e.loadData,T=e.popupVisible,A=e.open,k=e.popupClassName,I=e.dropdownClassName,O=e.dropdownMenuColumnStyle,W=e.dropdownStyle,w=e.popupPlacement,_=e.placement,E=e.onDropdownVisibleChange,$=e.onPopupVisibleChange,z=e.expandIcon,M=z===void 0?">":z,D=e.loadingIcon,B=e.children,X=e.dropdownMatchSelectWidth,L=X===void 0?!1:X,R=e.showCheckedStrategy,F=R===void 0?qt:R,U=e.optionRender,te=xa(e,Gn),ee=Nn(a),q=!!g,J=at(l,{value:i,postState:Ue}),Y=re(J,2),pe=Y[0],ge=Y[1],Q=c.useMemo(function(){return Gt(s)},[JSON.stringify(s)]),ve=Zt(Q,b),K=re(ve,3),P=K[0],j=K[1],H=K[2],G=at("",{value:S,postState:function(ne){return ne||""}}),le=re(G,2),ie=le[0],ce=le[1],be=function(ne,Ae){ce(ne),Ae.source!=="blur"&&m&&m(ne)},Re=Fn(y),we=re(Re,2),Xe=we[0],He=we[1],$e=$n(ie,P,Q,p||o,He,u||q),Ge=Yt(P,Q),Qe=ta(q,pe,j,H,Ge),De=re(Qe,3),xe=De[0],Le=De[1],Ve=De[2],Je=c.useMemo(function(){var ue=Oe(xe),ne=Jt(ue,j,F);return[].concat(se(Ve),se(H(ne)))},[xe,j,H,Ve,F]),ke=jn(Je,P,Q,q,C),Ie=Ke(function(ue){if(ge(ue),h){var ne=Ue(ue),Ae=ne.map(function(Sa){return Ee(Sa,P,Q).map(function(wa){return wa.option})}),Ze=q?ne:ne[0],et=q?Ae:Ae[0];h(Ze,et)}}),fa=ea(q,Ie,xe,Le,Ve,j,H,F),Ye=Ke(function(ue){(!q||d)&&ce(""),fa(ue)}),pa=function(ne,Ae){if(Ae.type==="clear"){Ie([]);return}var Ze=Ae.values[0],et=Ze.valueCells;Ye(et)},ma=A!==void 0?A:T,ga=I||k,va=_||w,ba=function(ne){E==null||E(ne),$==null||$(ne)},Ca=c.useMemo(function(){return{options:P,fieldNames:Q,values:xe,halfValues:Le,changeOnSelect:u,onSelect:Ye,checkable:g,searchOptions:$e,dropdownPrefixCls:p,loadData:x,expandTrigger:f,expandIcon:M,loadingIcon:D,dropdownMenuColumnStyle:O,optionRender:U}},[P,Q,xe,Le,u,Ye,g,$e,p,x,f,M,D,O,U]),gt=!(ie?$e:P).length,ya=ie&&He.matchInputWidth||gt?{}:{minWidth:"auto"};return c.createElement(_e.Provider,{value:Ca},c.createElement(Tn,lt({},te,{ref:t,id:ee,prefixCls:o,autoClearSearchValue:d,dropdownMatchSelectWidth:L,dropdownStyle:me(me({},ya),W),displayValues:ke,onDisplayValuesChange:pa,mode:q?"multiple":void 0,searchValue:ie,onSearch:be,showSearch:Xe,OptionList:qn,emptyOptions:gt,open:ma,dropdownClassName:ga,placement:va,onDropdownVisibleChange:ba,getRawInputElement:function(){return B}})))});Fe.SHOW_PARENT=qt;Fe.SHOW_CHILD=Xt;Fe.Panel=ra;function oa(e,t){const{getPrefixCls:a,direction:n,renderEmpty:o}=c.useContext(At),s=t||n,l=a("select",e),i=a("cascader",e);return[l,i,s,o]}function ia(e,t){return c.useMemo(()=>t?c.createElement("span",{className:`${e}-checkbox-inner`}):!1,[t])}const sa=(e,t,a)=>{let n=a;a||(n=t?c.createElement(ka,null):c.createElement(Aa,null));const o=c.createElement("span",{className:`${e}-menu-item-loading-icon`},c.createElement(Nt,{spin:!0}));return c.useMemo(()=>[n,o],[n])},la=e=>{const{prefixCls:t,componentCls:a}=e,n=`${a}-menu-item`,o=`
  &${n}-expand ${n}-expand-icon,
  ${n}-loading-icon
`;return[Sn(`${t}-checkbox`,e),{[a]:{"&-checkbox":{top:0,marginInlineEnd:e.paddingXS},"&-menus":{display:"flex",flexWrap:"nowrap",alignItems:"flex-start",[`&${a}-menu-empty`]:{[`${a}-menu`]:{width:"100%",height:"auto",[n]:{color:e.colorTextDisabled}}}},"&-menu":{flexGrow:1,flexShrink:0,minWidth:e.controlItemWidth,height:e.dropdownHeight,margin:0,padding:e.menuPadding,overflow:"auto",verticalAlign:"top",listStyle:"none","-ms-overflow-style":"-ms-autohiding-scrollbar","&:not(:last-child)":{borderInlineEnd:`${Tt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&-item":Object.assign(Object.assign({},Na),{display:"flex",flexWrap:"nowrap",alignItems:"center",padding:e.optionPadding,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationMid}`,borderRadius:e.borderRadiusSM,"&:hover":{background:e.controlItemBgHover},"&-disabled":{color:e.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"},[o]:{color:e.colorTextDisabled}},[`&-active:not(${n}-disabled)`]:{"&, &:hover":{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg}},"&-content":{flex:"auto"},[o]:{marginInlineStart:e.paddingXXS,color:e.colorTextDescription,fontSize:e.fontSizeIcon},"&-keyword":{color:e.colorHighlight}})}}}]},Qn=e=>{const{componentCls:t,antCls:a}=e;return[{[t]:{width:e.controlWidth}},{[`${t}-dropdown`]:[{[`&${a}-select-dropdown`]:{padding:0}},la(e)]},{[`${t}-dropdown-rtl`]:{direction:"rtl"}},Ia(e)]},ca=e=>{const t=Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2);return{controlWidth:184,controlItemWidth:111,dropdownHeight:180,optionSelectedBg:e.controlItemBgActive,optionSelectedFontWeight:e.fontWeightStrong,optionPadding:`${t}px ${e.paddingSM}px`,menuPadding:e.paddingXXS,optionSelectedColor:e.colorText}},ua=Ta("Cascader",e=>[Qn(e)],ca),Jn=e=>{const{componentCls:t}=e;return{[`${t}-panel`]:[la(e),{display:"inline-flex",border:`${Tt(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:e.borderRadiusLG,overflowX:"auto",maxWidth:"100%",[`${t}-menus`]:{alignItems:"stretch"},[`${t}-menu`]:{height:"auto"},"&-empty":{padding:e.paddingXXS}}]}},Yn=Pa(["Cascader","Panel"],e=>Jn(e),ca);function Zn(e){const{prefixCls:t,className:a,multiple:n,rootClassName:o,notFoundContent:s,direction:l,expandIcon:i,disabled:u}=e,h=c.useContext(It),C=u??h,[g,v,d,S]=oa(t,l),m=nt(v),[y,f,b]=ua(v,m);Yn(v);const p=d==="rtl",[x,T]=sa(g,p,i),A=s||(S==null?void 0:S("Cascader"))||c.createElement(Ut,{componentName:"Cascader"}),k=ia(v,n);return y(c.createElement(ra,Object.assign({},e,{checkable:k,prefixCls:v,className:Te(a,f,o,b,m),notFoundContent:A,direction:d,expandIcon:x,loadingIcon:T,disabled:C})))}var er=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a};const{SHOW_CHILD:tr,SHOW_PARENT:ar}=Fe;function nr(e,t,a){const n=e.toLowerCase().split(t).reduce((l,i,u)=>u===0?[i]:[].concat(se(l),[t,i]),[]),o=[];let s=0;return n.forEach((l,i)=>{const u=s+l.length;let h=e.slice(s,u);s=u,i%2===1&&(h=c.createElement("span",{className:`${a}-menu-item-keyword`,key:`separator-${i}`},h)),o.push(h)}),o}const rr=(e,t,a,n)=>{const o=[],s=e.toLowerCase();return t.forEach((l,i)=>{i!==0&&o.push(" / ");let u=l[n.label];const h=typeof u;(h==="string"||h==="number")&&(u=nr(String(u),s,a)),o.push(u)}),o},Me=c.forwardRef((e,t)=>{var a;const{prefixCls:n,size:o,disabled:s,className:l,rootClassName:i,multiple:u,bordered:h=!0,transitionName:C,choiceTransitionName:g="",popupClassName:v,dropdownClassName:d,expandIcon:S,placement:m,showSearch:y,allowClear:f=!0,notFoundContent:b,direction:p,getPopupContainer:x,status:T,showArrow:A,builtinPlacements:k,style:I,variant:O}=e,W=er(e,["prefixCls","size","disabled","className","rootClassName","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow","builtinPlacements","style","variant"]),w=Pt(W,["suffixIcon"]),{getPopupContainer:_,getPrefixCls:E,popupOverflow:$,cascader:z}=c.useContext(At),{status:M,hasFeedback:D,isFormItemInput:B,feedbackIcon:X}=c.useContext(Oa),L=vn(M,T),[R,F,U,te]=oa(n,p),ee=U==="rtl",q=E(),J=nt(R),[Y,pe,ge]=In(R,J),Q=nt(F),[ve]=ua(F,Q),{compactSize:K,compactItemClassnames:P}=Ea(R,p),[j,H]=mn("cascader",O,h),G=b||(te==null?void 0:te("Cascader"))||c.createElement(Ut,{componentName:"Cascader"}),le=Te(v||d,`${F}-dropdown`,{[`${F}-dropdown-rtl`]:U==="rtl"},i,J,Q,pe,ge),ie=c.useMemo(()=>{if(!y)return y;let ke={render:rr};return typeof y=="object"&&(ke=Object.assign(Object.assign({},ke),y)),ke},[y]),ce=_a(ke=>{var Ie;return(Ie=o??K)!==null&&Ie!==void 0?Ie:ke}),be=c.useContext(It),Re=s??be,[we,Xe]=sa(R,ee,S),He=ia(F,u),$e=Pn(e.suffixIcon,A),{suffixIcon:Ge,removeIcon:Qe,clearIcon:De}=On(Object.assign(Object.assign({},e),{hasFeedback:D,feedbackIcon:X,showSuffixIcon:$e,multiple:u,prefixCls:R,componentName:"Cascader"})),xe=c.useMemo(()=>m!==void 0?m:ee?"bottomRight":"bottomLeft",[m,ee]),Le=f===!0?{clearIcon:De}:f,[Ve]=Ma("SelectLike",(a=w.dropdownStyle)===null||a===void 0?void 0:a.zIndex),Je=c.createElement(Fe,Object.assign({prefixCls:R,className:Te(!n&&F,{[`${R}-lg`]:ce==="large",[`${R}-sm`]:ce==="small",[`${R}-rtl`]:ee,[`${R}-${j}`]:H,[`${R}-in-form-item`]:B},gn(R,L,D),P,z==null?void 0:z.className,l,i,J,Q,pe,ge),disabled:Re,style:Object.assign(Object.assign({},z==null?void 0:z.style),I)},w,{builtinPlacements:En(k,$),direction:U,placement:xe,notFoundContent:G,allowClear:Le,showSearch:ie,expandIcon:we,suffixIcon:Ge,removeIcon:Qe,loadingIcon:Xe,checkable:He,dropdownClassName:le,dropdownPrefixCls:n||F,dropdownStyle:Object.assign(Object.assign({},w.dropdownStyle),{zIndex:Ve}),choiceTransitionName:vt(q,"",g),transitionName:vt(q,"slide-up",C),getPopupContainer:x||_,ref:t}));return ve(Y(Je))}),or=_n(Me,"dropdownAlign",e=>Pt(e,["visible"]));Me.SHOW_PARENT=ar;Me.SHOW_CHILD=tr;Me.Panel=Zn;Me._InternalPanelDoNotUseOrYouWillBeFired=or;var ir=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return c.useMemo(function(){return e.apply(void 0,t)},t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function sr(){const{isPending:e,mutateAsync:t}=Ot({mutationFn:async a=>Et(`pro_webhooks/${a.webhook_id}/update`,{flow_id:a.flow_id},void 0,"POST"),mutationKey:["updateWebhook"]});return{isUpdatingWebhook:e,updateWebhook:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ot(e){const t={};if(!Array.isArray(e))return{};for(const a of e)a.dType===Ct.COLLECTION?t[a.label]=ot(a.value):a.dType===Ct.ARRAY?t[`${a.label}`]=ot(a.value):t[a.label]=a.value;return t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function da({wrapperClassName:e}){var g;const t=Number((g=qe())==null?void 0:g.flowId),{id:a}=Se(ct),[n,o]=_t(ft(a)),[s,l]=c.useState(!1),{isListening:i,startHookListen:u,stopHookListen:h}=sn({listenerType:"CAPTURE",onSuccess:({code:v,data:d})=>{v!=="SUCCESS"||Array.isArray(d)||(l(!0),o(S=>pt(S,m=>{m.variables=ln(d.variables)})))},params:{flowId:t,nodeId:a}}),{formattedTime:C}=cn({durationInSeconds:180,isActive:i,onComplete:h});if(c.useEffect(()=>{l(!1)},[n.machineSlug]),!Number.isNaN(t))return V("div",{className:Mt([e,"grid justify-items-start gap-3"]),children:[r(ae,{conditions:!i,children:r(ye,{icon:r(Ra,{size:16}),onClick:u,type:"primary",children:N("Listen Response")})}),r(ae,{conditions:i,children:V(ut,{align:"baseline",children:[r(ye,{icon:r($a,{size:16}),onClick:h,type:"primary",children:N("Stop")}),r(Nt,{size:16}),V(oe.Text,{children:[N("Listening"),"..."]}),r(oe.Text,{type:"secondary",children:C})]})}),r(ae,{conditions:[!n.variables||!n.variables.length],children:r(tt,{description:r("span",{dangerouslySetInnerHTML:{__html:N("Click the <b>Listen Response</b> button and submit your trigger. The captured response will be displayed below. The listener will stop automatically after <b>3 minutes</b>.")}}),type:"warning"})}),r(ae,{conditions:s,children:r(tt,{className:"w-full",message:N("Response captured"),showIcon:!0,type:"success"})}),r(ae,{conditions:[n.variables&&n.variables.length],children:r(tt,{className:"border-sky-300 bg-sky-100 text-sky-800 dark:border-sky-800 dark:bg-sky-950 dark:text-sky-100",description:N("Use a Condition node immediately after the Trigger node to filter the hook responses—like Form ID, Page ID, or other criteria—so that only the relevant data continues in the workflow."),icon:r(Da,{size:16}),showIcon:!0})}),V(ae,{conditions:n.variables&&n.variables.length,children:[r(oe.Title,{className:"mb-0.5",level:5,children:N("Captured Response")}),r(bt,{className:"max-h-[270px] text-xs",data:ot(n.variables)})]}),n.appSlug==="webhook"&&V(dt,{children:[r(oe.Title,{className:"mb-0 mt-2",level:5,children:N("Instant Webhook Response")}),V(ze.Group,{defaultValue:"a",size:"small",children:[r(ze.Button,{value:"a",children:N("Default Response")}),r(Be,{title:N("Custom response feature is not available yet. But planned."),children:r(ze.Button,{disabled:!0,value:"d",children:N("Custom Response")})}),r(Be,{title:N("Custom response feature is not available yet. But planned."),children:r(ze.Button,{disabled:!0,value:"d",children:N("Disable")})})]}),r(bt,{className:"text-xs",data:{code:"SUCCESS",data:"Accepted",status:"success"}})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function lr(e){const t=Rt(),{isPending:a,mutateAsync:n}=Ot({mutationFn:async o=>Et("pro_webhooks/save",o,void 0,"POST"),mutationKey:["saveWebhook"],onSuccess:o=>{o.data&&t.setQueryData(["webhooks",e||"all",o.data.app_slug||"all"],s=>s&&{...s,data:[...s.data||[],o.data]})}});return{isSavingWebhook:a,saveWebhook:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Title:cr}=oe;function ur({appSlug:e,children:t,onPopoverToggle:a,onSave:n,onValidate:o,onWebhookChange:s}){var f;const l=Number((f=qe())==null?void 0:f.flowId),[i,u]=c.useState(!1),{isSavingWebhook:h,saveWebhook:C}=lr(l),[g,v]=c.useState({app_slug:e,title:N("Untitled Webhook")}),d=()=>{u(b=>(a==null||a(!b),!b))},S=()=>{u(!1),a==null||a(!1)},m=b=>p=>{v(x=>pt(x,T=>{T[b]=p.target.value}))};return r(zt,{content:r(yn,{onFinish:async()=>{if(o&&o(g)===!1)return;const{data:b}=await C({...g,flow_id:l});s({id:b.id,url:b.url}),n==null||n(b),S(),v({app_slug:e,title:N("Untitled Webhook")})},children:V(ut,{direction:"vertical",children:[r(Ht,{disabled:h,label:N("Webhook name"),onChange:m("title"),required:!0,value:g.title}),t,V(Kt,{gap:8,justify:"end",children:[r(ye,{onClick:S,children:N("Cancel")}),r(ye,{htmlType:"submit",loading:h,type:"primary",children:"Save"})]})]})}),destroyTooltipOnHide:!0,open:i,placement:"right",styles:{body:{maxHeight:"100vh",maxWidth:400,overflowY:"auto"}},title:V(bn,{justify:"space-between",children:[r(cr,{css:Cn({mb:"0*"}),level:5,children:N("Create a webhook")}),r(ye,{disabled:h,icon:r(ht,{}),onClick:S,size:"small",type:"text"})]}),trigger:"click",children:r(Be,{title:N("Add new webhook"),children:r(ye,{onClick:d,children:N("Add Webhook")})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function dr({appSlug:e,children:t,invalidMessage:a,onPopoverToggle:n,onRender:o,onSave:s,onValidate:l,onWebhookChange:i,status:u,value:h,wrapperClassName:C}){var b;const g=Number((b=qe())==null?void 0:b.flowId),{isWebhookLoading:v,webhooks:d}=on(g,e),{updateWebhook:S}=sr();c.useEffect(()=>{o==null||o()},[]);const m=c.useMemo(()=>d.map(p=>({label:p.title,value:p.id})),[d]),y=()=>{var p;return((p=d.find(x=>x.id===h))==null?void 0:p.url)||""},f=async p=>{var T;const x=((T=d.find(A=>A.id===p))==null?void 0:T.url)||"";i({id:p,url:x}),S({flow_id:g,webhook_id:p})};if(!Number.isNaN(g))return V("div",{className:"grid gap-3",children:[r(Ft,{invalidMessage:a,label:N("Webhook"),loading:v,onChange:f,optionFilterProp:"label",options:m,placeholder:N("Choose a webhook"),showSearch:!0,status:u,suffix:r(ur,{appSlug:e,onPopoverToggle:n,onSave:s,onValidate:l,onWebhookChange:i,children:t},`webhook-popover-${g}-${e}`),value:h,wrapperClassName:Mt([C,"w-100"])}),h&&V(dt,{children:[r(Vt,{label:N("Callback URL"),value:y()}),r(da,{})]})]},`${g}-${e}`)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function St({icon:e,iconSize:t,label:a,onRender:n,text:o,tooltip:s,wrapperClassName:l,...i}){const u=c.useId(),{token:h}=La.useToken(),C=e||void 0;return c.useEffect(()=>{n==null||n()},[]),V("div",{className:l,children:[r("label",{className:"d-ib mb-1",css:Va({color:h.colorText,minHeight:22},"",""),htmlFor:u,children:a||""}),r(Be,{title:s,children:r(ye,{id:u,...C?{icon:r(C,{size:t})}:{},"data-testid":"btnComponent",...i,children:o})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const hr={a:({children:e,href:t})=>r("a",{className:"text-blue-500 decoration-wavy hover:underline",href:t,rel:"noreferrer",target:"_blank",children:e}),code:({children:e})=>r("code",{className:"rounded bg-gray-200 p-1 dark:bg-slate-700 dark:text-slate-50",children:e}),h1:({children:e})=>r("h1",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),h2:({children:e})=>r("h2",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),h3:({children:e})=>r("h3",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),hr:()=>r("hr",{className:"my-2 border-b-0 border-t border-slate-300 dark:border-slate-600"}),p:({children:e})=>r("p",{className:"m-0 text-gray-600 dark:text-slate-100",children:e})};function ha({className:e,note:t,onRender:a}){c.useEffect(()=>{a==null||a()},[]);const n=Array.isArray(t)?t.join(`
`):t;return r("div",{className:Ne(["rounded border border-solid px-2 py-1 text-sm","border-slate-200 bg-slate-100 text-gray-500","dark:border-slate-800 dark:bg-slate-900 dark:text-gray-300",e]),children:r(wn,{components:hr,children:n})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const wt=c.memo(it);function it({appName:e,appSlug:t,component:a,index:n,nodeId:o,parentComponentIndex:s}){const l=c.useRef(!1),{handleComponentsEvents:i,handleComponentsEventsAsync:u}=jt(o),h=(f,b,p)=>typeof f=="boolean"?f:i(f,b,p,s)();c.useEffect(()=>{const f=setTimeout(()=>{l.current=!0},100);return()=>{l.current=!1,clearTimeout(f)}},[]);const{componentGroupId:C,componentName:g,fieldType:v,id:d,render:S,...m}=a,y=h(S,n,d);return r(Wa,{children:(()=>{if(g===de.select&&y){const{onChange:f,onLoadData:b,onRefetch:p,onRender:x,...T}=m;return r(he,{enableAnimate:l.current,children:r(Ft,{...x&&{onRender:i(x,n,d,s)},...f&&{onChange:i(f,n,d,s)},...b&&{onLoadData:u(b,n,d,s)},...p&&{suffix:r(St,{icon:ja,loading:a.loading,onClick:i(p,n,d,s),tooltip:a.loading?"Refetching...":"Refetch List"})},...T})})}if(a.componentName===de.input&&y){const{onChange:f,onRender:b,...p}=m;return r(he,{enableAnimate:l.current,children:r(Ht,{...b&&{onRender:i(b,n,d,s)},...f&&{onChange:i(f,n,d,s)},...p})})}if(a.componentName===de.button&&y){const{onClick:f,onRender:b,...p}=m;return r(he,{enableAnimate:l.current,children:r(St,{...b&&{onRender:i(b,n,d,s)},...f&&{onClick:i(f,n,d,s)},...p})})}if(a.componentName===de.mixInput&&y){const{onChange:f,onRender:b,...p}=m;return r(he,{enableAnimate:l.current,children:r(pn,{...b&&{onRender:i(b,n,d,s)},...f&&{onChange:i(f,n,d,s)},...p})})}if(a.componentName===de.note&&y&&t){const{...f}=m;return r(he,{enableAnimate:l.current,children:r(ha,{...f})})}if(a.componentName===de.connection&&y&&t){const{extraComponents:f,onConnectionAddChange:b,onConnectionChange:p,onRender:x,onValidate:T,...A}=m;return r(he,{enableAnimate:l.current,children:r(nn,{appName:e||"",appSlug:t,onConnectionChange:i(p,n,d,s),...b&&{onConnectionAddChange:i(b,n,d,s)},...T&&{onValidate:i(T,n,d,s)},...x&&{onRender:i(x,n,d,s)},...A,children:(f==null?void 0:f.length)&&f.map((k,I)=>r(it,{appName:e||"",appSlug:t,component:k,index:I,nodeId:o,parentComponentIndex:n},`extra-component-${I}-${k.id}`))})})}if(a.componentName===de.repeaterField&&y){const{labelActionOnClick:f,onChange:b,onRender:p,...x}=m;return r(he,{enableAnimate:l.current,children:r(rn,{...p&&{onRender:i(p,n,d,s)},...b&&{onChange:i(b,n,d,s)},...f&&{labelActionOnClick:i(f,n,d,s)},...x})})}if(a.componentName===de.webhook&&y&&t){const{extraComponents:f,onPopoverToggle:b,onRender:p,onSave:x,onValidate:T,onWebhookChange:A,...k}=m;return r(he,{enableAnimate:l.current,children:r(dr,{appSlug:t,onWebhookChange:i(A,n,d,s),...p&&{onRender:i(p,n,d,s)},...b&&{onPopoverToggle:i(b,n,d,s)},...x&&{onSave:i(x,n,d,s)},...T&&{onValidate:i(T,n,d,s)},...k,children:(f==null?void 0:f.length)&&f.map((I,O)=>r(it,{appName:e||"",appSlug:t,component:I,index:O,nodeId:o,parentComponentIndex:n},`extra-component-${O}-${I.id}`))})})}if(a.componentName===de.hookListener&&y)return r(he,{enableAnimate:l.current,children:r(da,{})});if(a.componentName===de.InputCopyable&&y)return r(he,{enableAnimate:l.current,children:r(Vt,{label:a==null?void 0:a.label,value:a==null?void 0:a.value})});if(a.componentName===de.switch&&y){const{onChange:f,onClick:b,onRender:p,...x}=m;return r(he,{enableAnimate:l.current,children:r(un,{...p&&{onRender:i(p,n,d,s)},...f&&{onChange:i(f,n,d,s)},...b&&{onClick:i(b,n,d,s)},...x})})}})()})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};var fr={name:"1d3w5wq",styles:"width:100%"};function pr({appName:e,appSlug:t,components:a,machineSlug:n,nodeId:o}){const{handleMachineEvent:s}=jt(o);c.useEffect(()=>{!Array.isArray(a)||a.length===0||s("ON_MACHINE_LOAD")},[n,a==null?void 0:a.length]);const l=new Map,i=new Map;return r("div",{className:"grid gap-3",children:a==null?void 0:a.map((u,h)=>{if("componentGroupId"in u&&!i.has(u.id)){const C=u.componentGroupId,g=[],v=a.filter((d,S)=>{if(d.componentGroupId===C)return g.push(S),!0});return r(ut.Compact,{css:fr,children:v.map(d=>{if(!i.has(d.id)){if(l.has(d.id)){console.error(`Component id ${d.id} is duplicated`,l,i);return}return l.set(d.id,1),i.set(d.id,1),r("div",{className:d.groupItemClassName,style:d.groupItemStyle,children:r(wt,{appName:e,appSlug:t,component:d,index:g.shift()||0,nodeId:o})},d.id+t+n)}})},`${C}${t}${n}`)}if(!i.has(u.id)){if(l.has(u.id)){console.error(`Component id ${u.id} is duplicated`,l,i);return}return l.set(u.id,1),i.set(u.id,1),r(wt,{appName:e,appSlug:t,component:u,index:h,nodeId:o},u.id+t+n)}})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function mr(e,t,a,n){const o=Ja(t,e,a);return t&&o.length===0?[]:t&&o.length>0?xt(o,a,n):xt(e,a,n)}function gr(){return V("div",{className:"mt-10 flex w-11/12 flex-col items-center text-xs",children:[r("span",{className:"text-slate-500",children:r(Fa,{size:46})}),r("span",{className:"mt-2 font-medium",children:N("Have a integration request ?")}),V("span",{className:"mt-1 text-slate-500",children:[N("Join our "),r("a",{className:"text-blue-500 underline",href:Bt.integrationRequest,rel:"noreferrer noopener nofollow",target:"_blank",children:N("forum discussion")})," ",r("br",{})," ",N("and ask for new integration")]})]})}function vr({app:e}){return V("div",{className:"flex items-center gap-2",children:[r(Wt,{alt:`${e.name} icon`,color:e.color,padding:3,size:35,src:e.logoUrl}),r(oe.Text,{className:"text-wrap",children:e.name})]},e.appSlug)}function xt(e,t,a){return e.reduce((n,o)=>{const s=[...o.actions,...o.triggers].reduce((l,i)=>(i.runType===t&&!i.isComingSoon&&l.push({disabled:i.isPro&&!$t.IS_PRO,label:r(br,{action:i,selectedMachineLoading:a}),value:i.machineSlug}),l),[]);return s.push({label:r(gr,{}),value:""}),s.length>1&&n.push({children:s,label:r(vr,{app:o}),value:o.appSlug}),n},[])}function br({action:e,selectedMachineLoading:t}){return V("div",{children:[V(oe.Text,{className:"flex items-center gap-3 text-wrap",children:[e.label,r(ae,{conditions:e.machineSlug===t,children:r(Dt,{className:"animate-spin",size:16})})]}),r(We,{className:"text-xs capitalize",color:e.runType==="action"?"purple":"orange",children:Ya[e.runType]}),r(ae,{conditions:e.isPro&&!$t.IS_PRO,children:r(We,{className:"text-xs",color:"gold-inverse",children:N("Pro")})}),r(ae,{conditions:e.isComingSoon,children:r(We,{className:"text-xs",color:"purple-inverse",children:N("Coming Soon")})})]},e.machineSlug)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Cr=ir(mr),st=240;function yr({setIsMachinePopoverOpen:e}){const{id:t,type:a}=Se(ct),n=Number(qe().flowId),[o,s]=_t(ft(t)),{appSlug:l,machineSlug:i}=o,[u,h]=c.useState(""),C=Se(Za),g=Se(Ha),[v,d]=c.useState(""),[S,m]=c.useState(""),y=xn(_=>m(_),300),[f,b]=c.useState([(o==null?void 0:o.appSlug)||"",(o==null?void 0:o.machineSlug)||""]),p=c.useRef(null),x=za(en),T=!!f[0],A=Rt(),k=_=>{var E,$;d(_.target.value),y(_.target.value),($=(E=p.current)==null?void 0:E.querySelector(".ant-cascader-menu"))==null||$.scrollTo({behavior:"smooth",top:0})},[I,O]=c.useState([]);c.useEffect(()=>{C.length&&O(C)},[C]);const W=Cr(I,S,a,u),w=async _=>{const[E,$]=_;if($===i&&E===l||(b([E,$]),!E||!$))return;const M=C.find(({appSlug:R})=>R===E),D=[...(M==null?void 0:M.actions)||[],...(M==null?void 0:M.triggers)||[]].find(({machineSlug:R})=>R===$);h($);const B=D==null?void 0:D.triggerType;if(!M||!D||!B){console.error(`Machine or App ${E} -> ${$} -> ${B}`);return}const X={appColor:M.color,appIcon:M.logoUrl,appSlug:M.appSlug,appTitle:M.name,isPro:D.isPro,machineLabel:D.label,machineSlug:D.machineSlug,runType:D.runType,states:{components:[],connections:[]},topBanner:D.topBanner,triggerType:B,variables:void 0},L=tn(n,t,X);await Ba("node/save",L),A.removeQueries({queryKey:["flow_node",t]}),s(X),h(""),a==="trigger"&&x(R=>pt(R,F=>{F.triggerType=B})),e(!1)};return r(dn,{children:V("div",{ref:p,style:{maxWidth:T?"inherit":st},children:[r("div",{className:"px-2",children:r(kn,{allowClear:!0,className:"mb-2 w-full bg-gray-950 bg-opacity-10 focus:bg-opacity-100 dark:bg-slate-950 dark:bg-opacity-40",onChange:k,placeholder:N("Search"),prefix:r(Ka,{size:19}),size:"small",value:v})}),V("div",{className:Ne([T&&"grid-cols-2","mb-1 grid border-0 border-b border-solid border-slate-300 px-5 dark:border-gray-700"]),children:[r(oe.Text,{className:"text-xs text-gray-500",children:N("Apps")}),r(ae,{conditions:T&&I.length,children:r(oe.Text,{className:"ml-5 text-xs text-gray-500",children:N("Integrations")})})]}),r(Me.Panel,{changeOnSelect:!0,className:"h-[calc(92vh-100px)] min-w-full rounded-none border-none",css:wr(g),notFoundContent:r(xr,{query:v}),onChange:w,options:W,value:f[1]?f:[f[0]]})]})})}const Sr=c.memo(yr);function wr(e){return{"& .ant-cascader-menu":{maxWidth:st,minWidth:st,paddingBottom:100},"& .ant-cascader-menu-item-active":{"&::before":{background:e?"#fff":"#000",borderRadius:100,content:'""',height:"40%",inset:0,left:2,marginBlock:"auto",position:"absolute",top:0,width:3},backgroundColor:e?"#3e3a50":"#ced2dd",position:"relative"}}}function xr({query:e}){return V("div",{className:"flex w-full flex-col items-center gap-2 p-4",children:[r(ht,{className:"dark:text-slate-400",size:39}),Lt(N('No apps found for "%s"'),e),r("br",{}),V(oe.Text,{children:[N("Request for new Integration "),V("a",{className:"text-blue-600 underline",href:Bt.integrationRequest,rel:"noopener noreferrer nofollow",target:"_blank",children:[N("here"),r(Ua,{size:14})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function kr({actionName:e,appColor:t,appIcon:a,appName:n,type:o}){const[s,l]=c.useState(!1),{isDarkTheme:i,preferNodeDetailsInDrawer:u}=Se(qa);c.useLayoutEffect(()=>{n&&e||setTimeout(()=>{l(!0)},u?250:0)},[e,n,u]);const h=s?Xa:Ga;return r(zt,{classNames:{body:Ne(["p-0 mt-4 border-2 border-solid",i?"bg-[#2f2e35b3] border-[#44434D]":"bg-[#fffc] border-[#e8e8e8]"]),root:"mt-2 backdrop-blur-md"},content:r(Sr,{setIsMachinePopoverOpen:l}),destroyTooltipOnHide:!0,onOpenChange:l,open:s,placement:u?"left":"right",title:V(Kt,{className:"px-3 pt-2",justify:"space-between",children:[r(oe.Title,{className:"m-0",level:5,children:N("Select App & Action")}),r(ye,{"aria-label":N("Close Popup"),icon:r(ht,{}),onClick:()=>l(!1),size:"small",type:"text"})]}),trigger:"click",children:V("button",{"aria-label":N("Open App & Action Popup"),className:Ne(["flex cursor-pointer items-center gap-3 border-0 bg-transparent px-1 ring-gray-900 focus-visible:ring-4","rounded-sm outline-8 outline-slate-200 hover:bg-slate-200 hover:outline dark:outline-gray-900 dark:hover:bg-gray-900",s&&"bg-slate-200 outline dark:bg-gray-900"]),type:"button",children:[r(ae,{conditions:u,children:r(h,{className:"text-gray-500",size:18})}),r(Wt,{alt:n,color:t,size:50,src:a}),V("div",{className:"text-left",children:[r(oe.Title,{className:"m-0",level:4,children:n||N("Select App")}),r(oe.Title,{className:"m-0 cursor-pointer capitalize",level:5,children:e||Lt(N("Select %s"),o)})]}),r(ae,{conditions:!u,children:r(h,{className:"text-gray-500",size:18})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ro(){var S,m,y;const{id:e,type:t}=Se(ct),a=Se(Qa),n=Se(ft(e)),{appColor:o,appIcon:s,appSlug:l,appTitle:i,machineLabel:u,machineSlug:h,states:C,topBanner:g}=n,{isNodeDetailsFetching:v,isNodeDetailsLoading:d}=hn(e,l||"",h||"",((S=C==null?void 0:C.components)==null?void 0:S.length)||0);return V(dt,{children:[V("div",{className:"-mt-4 mb-4",children:[V("div",{className:"flex items-center pb-1",children:[r(We,{className:Ne([a?"ml-8":"ml-1","text-xs capitalize"]),color:t==="action"?"blue":"orange",children:t}),r(We,{className:"min-w-6 text-center font-mono text-xs",children:an(e)}),r(ae,{conditions:v,children:r(Dt,{className:"animate-spin",size:18})})]}),r(kr,{actionName:u,appColor:o,appIcon:s,appName:i,type:t})]}),r(ae,{conditions:[!d,g,g==null?void 0:g.length],children:r(ha,{className:"mb-2",note:(n==null?void 0:n.topBanner)||""},`note-${l}-${u}-${i}`)}),r(ae,{conditions:d&&!v||!((y=(m=n==null?void 0:n.states)==null?void 0:m.components)!=null&&y.length)&&v,children:Array.from({length:2}).map((f,b)=>V("div",{className:"mb-4",children:[r(yt,{active:!0,className:"w-56",paragraph:!1}),r(yt.Input,{active:!0,block:!0})]},`sk-${b}`))}),r("div",{className:Ne([v&&"cursor-wait opacity-80"]),children:r("div",{className:Ne([v&&"pointer-events-none"]),children:!d&&(C==null?void 0:C.components)&&r(pr,{appName:i,appSlug:l,components:C.components,machineSlug:h,nodeId:e})})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{ro as default};

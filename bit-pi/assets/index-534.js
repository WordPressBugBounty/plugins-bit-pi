import{r as c,a3 as se,Z as me,Y as Z,W as At,K as oe,X as Te,ac as Ce,b as lt,ab as at,P as Ke,$ as Na,ad as Nt,R as Tt,bB as Ta,bt as Ia,af as It,ag as Pa,aj as Oa,bQ as Ea,d9 as _a,bS as Pt,ar as nt,an as Ot,bR as Ma,bu as $a,ap as Ra,bl as Da,cw as vt,g as Et,q as _t,aG as qe,v as Se,av as ct,c as Mt,a as R,j as r,aA as $t,x as ae,B as ye,_ as N,da as La,S as ut,b5 as Va,aR as tt,db as ja,F as dt,ae as Be,au as Rt,p as ht,t as Dt,i as Lt,l as we,dc as Wa,cj as Fa,y as Vt,dd as jt,de as Ha,aI as za,e as Ka,D as Ba,aH as Ua,aB as Wt,s as qa,b9 as Xa,df as Ga,dg as Qa,aV as Ja}from"./main-moody-dragons-sleep.js";import{m as ft,D as de,a2 as Ya,k as Za,Y as en,f as tn,K as an,l as nn}from"./_applist-880.js";import{I as Ft,C as rn,R as on}from"./index-914.js";import{u as sn}from"./usewebho-43.js";import{u as ln,f as cn,a as un,J as bt,b as Ht,A as he,c as zt,F as dn,d as hn}from"./index-330.js";import{c as pt}from"./mutative-278.js";import{c as fn,a as rt,V as Ct,R as ze,M as pn}from"./import-67.js";import{x as mn,y as gn,z as vn,T as re,R as bn}from"./index-133.js";import{S as Kt}from"./index-295.js";import{u as Cn}from"./utilscss-96.js";import{I as Bt}from"./index-973.js";import{P as Ut}from"./index-978.js";import{F as yn,l as qt}from"./links-959.js";import{g as Sn,F as Xt}from"./index-121.js";import{M as wn}from"./index-294.js";import{S as xn}from"./index-452.js";import{u as kn}from"./usedebou-894.js";import{T as We}from"./index-384.js";import{I as An}from"./index.es-686.js";import{u as Nn,a as Tn,B as In,D as Gt,b as Pn,c as On,d as En,m as _n,g as Mn}from"./index-190.js";import{S as yt}from"./skeleton-461.js";import"./lodash-939.js";import"./oauthhel-259.js";import"./index-445.js";import"./index-761.js";import"./col-819.js";import"./dropdown-16.js";import"./index-380.js";import"./exporthe-289.js";import"./context-183.js";import"./usebreak-312.js";import"./paginati-636.js";import"./extendso-498.js";import"./searchou-133.js";import"./index-270.js";var _e=c.createContext({}),Pe="__rc_cascader_search_mark__",$n=function(t,a,n){var o=n.label,s=o===void 0?"":o;return a.some(function(l){return String(l[s]).toLowerCase().includes(t.toLowerCase())})},Rn=function(t,a,n,o){return a.map(function(s){return s[o.label]}).join(" / ")},Dn=function(t,a,n,o,s,l){var i=s.filter,u=i===void 0?$n:i,h=s.render,g=h===void 0?Rn:h,v=s.limit,b=v===void 0?50:v,d=s.sort;return c.useMemo(function(){var S=[];if(!t)return[];function m(y,f){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;y.forEach(function(p){if(!(!d&&b!==!1&&b>0&&S.length>=b)){var x=[].concat(se(f),[p]),T=p[n.children],A=C||p.disabled;if((!T||T.length===0||l)&&u(t,x,{label:n.label})){var k;S.push(me(me({},p),{},(k={disabled:A},Z(k,n.label,g(t,x,o,n)),Z(k,Pe,x),Z(k,n.children,void 0),k)))}T&&m(p[n.children],x,A)}})}return m(a,[]),d&&S.sort(function(y,f){return d(y[Pe],f[Pe],t,n)}),b!==!1&&b>0?S.slice(0,b):S},[t,a,n,o,g,l,u,d,b])},mt="__RC_CASCADER_SPLIT__",Qt="SHOW_PARENT",Jt="SHOW_CHILD";function fe(e){return e.join(mt)}function Oe(e){return e.map(fe)}function Ln(e){return e.split(mt)}function Yt(e){var t=e||{},a=t.label,n=t.value,o=t.children,s=n||"value";return{label:a||"label",value:s,key:s,children:o||"children"}}function je(e,t){var a,n;return(a=e.isLeaf)!==null&&a!==void 0?a:!((n=e[t.children])!==null&&n!==void 0&&n.length)}function Vn(e){var t=e.parentElement;if(t){var a=e.offsetTop-t.offsetTop;a-t.scrollTop<0?t.scrollTo({top:a}):a+e.offsetHeight-t.scrollTop>t.offsetHeight&&t.scrollTo({top:a+e.offsetHeight-t.offsetHeight})}}function Zt(e,t){return e.map(function(a){var n;return(n=a[Pe])===null||n===void 0?void 0:n.map(function(o){return o[t.value]})})}function jn(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ue(e){return e?jn(e)?e:(e.length===0?[]:[e]).map(function(t){return Array.isArray(t)?t:[t]}):[]}function ea(e,t,a){var n=new Set(e),o=t();return e.filter(function(s){var l=o[s],i=l?l.parent:null,u=l?l.children:null;return l&&l.node.disabled?!0:a===Jt?!(u&&u.some(function(h){return h.key&&n.has(h.key)})):!(i&&!i.node.disabled&&n.has(i.key))})}function Ee(e,t,a){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=t,s=[],l=function(){var h,g,v,b=e[i],d=(h=o)===null||h===void 0?void 0:h.findIndex(function(m){var y=m[a.value];return n?String(y)===String(b):y===b}),S=d!==-1?(g=o)===null||g===void 0?void 0:g[d]:null;s.push({value:(v=S==null?void 0:S[a.value])!==null&&v!==void 0?v:b,index:d,option:S}),o=S==null?void 0:S[a.children]},i=0;i<e.length;i+=1)l();return s}const Wn=function(e,t,a,n,o){return c.useMemo(function(){var s=o||function(l){var i=n?l.slice(-1):l,u=" / ";return i.every(function(h){return["string","number"].includes(At(h))})?i.join(u):i.reduce(function(h,g,v){var b=c.isValidElement(g)?c.cloneElement(g,{key:v}):g;return v===0?[b]:[].concat(se(h),[u,b])},[])};return e.map(function(l){var i,u=Ee(l,t,a),h=s(u.map(function(v){var b,d=v.option,S=v.value;return(b=d==null?void 0:d[a.label])!==null&&b!==void 0?b:S}),u.map(function(v){var b=v.option;return b})),g=fe(l);return{label:h,value:g,key:g,valueCells:l,disabled:(i=u[u.length-1])===null||i===void 0||(i=i.option)===null||i===void 0?void 0:i.disabled}})},[e,t,a,o,n])};function ta(e,t){return c.useCallback(function(a){var n=[],o=[];return a.forEach(function(s){var l=Ee(s,e,t);l.every(function(i){return i.option})?o.push(s):n.push(s)}),[o,n]},[e,t])}const Fn=function(e,t){var a=c.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}}),n=c.useCallback(function(){return a.current.options!==e&&(a.current.options=e,a.current.info=fn(e,{fieldNames:t,initWrapper:function(s){return me(me({},s),{},{pathKeyEntities:{}})},processEntity:function(s,l){var i=s.nodes.map(function(u){return u[t.value]}).join(mt);l.pathKeyEntities[i]=s,s.key=i}})),a.current.info.pathKeyEntities},[t,e]);return n};function aa(e,t){var a=c.useMemo(function(){return t||[]},[t]),n=Fn(a,e),o=c.useCallback(function(s){var l=n();return s.map(function(i){var u=l[i].nodes;return u.map(function(h){return h[e.value]})})},[n,e]);return[a,n,o]}function Hn(e){return c.useMemo(function(){if(!e)return[!1,{}];var t={matchInputWidth:!0,limit:50};return e&&At(e)==="object"&&(t=me(me({},t),e)),t.limit<=0&&(t.limit=!1),[!0,t]},[e])}function na(e,t,a,n,o,s,l,i){return function(u){if(!e)t(u);else{var h=fe(u),g=Oe(a),v=Oe(n),b=g.includes(h),d=o.some(function(A){return fe(A)===h}),S=a,m=o;if(d&&!b)m=o.filter(function(A){return fe(A)!==h});else{var y=b?g.filter(function(A){return A!==h}):[].concat(se(g),[h]),f=s(),C;if(b){var p=rt(y,{halfCheckedKeys:v},f);C=p.checkedKeys}else{var x=rt(y,!0,f);C=x.checkedKeys}var T=ea(C,s,i);S=l(T)}t([].concat(se(m),se(S)))}}}function ra(e,t,a,n,o){return c.useMemo(function(){var s=o(t),l=oe(s,2),i=l[0],u=l[1];if(!e||!t.length)return[i,[],u];var h=Oe(i),g=a(),v=rt(h,!0,g),b=v.checkedKeys,d=v.halfCheckedKeys;return[n(b),n(d),u]},[e,t,a,n,o])}var zn=c.memo(function(e){var t=e.children;return t},function(e,t){return!t.open});function Kn(e){var t,a=e.prefixCls,n=e.checked,o=e.halfChecked,s=e.disabled,l=e.onClick,i=e.disableCheckbox,u=c.useContext(_e),h=u.checkable,g=typeof h!="boolean"?h:null;return c.createElement("span",{className:Te("".concat(a),(t={},Z(t,"".concat(a,"-checked"),n),Z(t,"".concat(a,"-indeterminate"),!n&&o),Z(t,"".concat(a,"-disabled"),s||i),t)),onClick:l},g)}var oa="__cascader_fix_label__";function Bn(e){var t=e.prefixCls,a=e.multiple,n=e.options,o=e.activeValue,s=e.prevValuePath,l=e.onToggleOpen,i=e.onSelect,u=e.onActive,h=e.checkedSet,g=e.halfCheckedSet,v=e.loadingKeys,b=e.isSelectable,d=e.disabled,S="".concat(t,"-menu"),m="".concat(t,"-menu-item"),y=c.useContext(_e),f=y.fieldNames,C=y.changeOnSelect,p=y.expandTrigger,x=y.expandIcon,T=y.loadingIcon,A=y.dropdownMenuColumnStyle,k=y.optionRender,I=p==="hover",O=function(_){return d||_},W=c.useMemo(function(){return n.map(function(w){var _,E=w.disabled,D=w.disableCheckbox,z=w[Pe],M=(_=w[oa])!==null&&_!==void 0?_:w[f.label],L=w[f.value],B=je(w,f),X=z?z.map(function(te){return te[f.value]}):[].concat(se(s),[L]),V=fe(X),$=v.includes(V),F=h.has(V),U=g.has(V);return{disabled:E,label:M,value:L,isLeaf:B,isLoading:$,checked:F,halfChecked:U,option:w,disableCheckbox:D,fullPath:X,fullPathKey:V}})},[n,h,f,g,v,s]);return c.createElement("ul",{className:S,role:"menu"},W.map(function(w){var _,E=w.disabled,D=w.label,z=w.value,M=w.isLeaf,L=w.isLoading,B=w.checked,X=w.halfChecked,V=w.option,$=w.fullPath,F=w.fullPathKey,U=w.disableCheckbox,te=function(){if(!O(E)){var Y=se($);I&&M&&Y.pop(),u(Y)}},ee=function(){b(V)&&!O(E)&&i($,M)},q;return typeof V.title=="string"?q=V.title:typeof D=="string"&&(q=D),c.createElement("li",{key:F,className:Te(m,(_={},Z(_,"".concat(m,"-expand"),!M),Z(_,"".concat(m,"-active"),o===z||o===F),Z(_,"".concat(m,"-disabled"),O(E)),Z(_,"".concat(m,"-loading"),L),_)),style:A,role:"menuitemcheckbox",title:q,"aria-checked":B,"data-path-key":F,onClick:function(){te(),!U&&(!a||M)&&ee()},onDoubleClick:function(){C&&l(!1)},onMouseEnter:function(){I&&te()},onMouseDown:function(Y){Y.preventDefault()}},a&&c.createElement(Kn,{prefixCls:"".concat(t,"-checkbox"),checked:B,halfChecked:X,disabled:O(E)||U,disableCheckbox:U,onClick:function(Y){U||(Y.stopPropagation(),ee())}}),c.createElement("div",{className:"".concat(m,"-content")},k?k(V):D),!L&&x&&!M&&c.createElement("div",{className:"".concat(m,"-expand-icon")},x),L&&T&&c.createElement("div",{className:"".concat(m,"-loading-icon")},T))}))}var Un=function(t,a){var n=c.useContext(_e),o=n.values,s=o[0],l=c.useState([]),i=oe(l,2),u=i[0],h=i[1];return c.useEffect(function(){t||h(s||[])},[a,s]),[u,h]};const qn=function(e,t,a,n,o,s,l){var i=l.direction,u=l.searchValue,h=l.toggleOpen,g=l.open,v=i==="rtl",b=c.useMemo(function(){for(var A=-1,k=t,I=[],O=[],W=n.length,w=Zt(t,a),_=function(L){var B=k.findIndex(function(X,V){return(w[V]?fe(w[V]):X[a.value])===n[L]});if(B===-1)return 1;A=B,I.push(A),O.push(n[L]),k=k[A][a.children]},E=0;E<W&&k&&!_(E);E+=1);for(var D=t,z=0;z<I.length-1;z+=1)D=D[I[z]][a.children];return[O,A,D,w]},[n,a,t]),d=oe(b,4),S=d[0],m=d[1],y=d[2],f=d[3],C=function(k){o(k)},p=function(k){var I=y.length,O=m;O===-1&&k<0&&(O=I);for(var W=0;W<I;W+=1){O=(O+k+I)%I;var w=y[O];if(w&&!w.disabled){var _=S.slice(0,-1).concat(f[O]?fe(f[O]):w[a.value]);C(_);return}}},x=function(){if(S.length>1){var k=S.slice(0,-1);C(k)}else h(!1)},T=function(){var k,I=((k=y[m])===null||k===void 0?void 0:k[a.children])||[],O=I.find(function(w){return!w.disabled});if(O){var W=[].concat(se(S),[O[a.value]]);C(W)}};c.useImperativeHandle(e,function(){return{onKeyDown:function(k){var I=k.which;switch(I){case Ce.UP:case Ce.DOWN:{var O=0;I===Ce.UP?O=-1:I===Ce.DOWN&&(O=1),O!==0&&p(O);break}case Ce.LEFT:{if(u)break;v?T():x();break}case Ce.RIGHT:{if(u)break;v?x():T();break}case Ce.BACKSPACE:{u||x();break}case Ce.ENTER:{if(S.length){var W=y[m],w=(W==null?void 0:W[Pe])||[];w.length?s(w.map(function(_){return _[a.value]}),w[w.length-1]):s(S,y[m])}break}case Ce.ESC:h(!1),g&&k.stopPropagation()}},onKeyUp:function(){}}})};var ia=c.forwardRef(function(e,t){var a,n,o,s=e.prefixCls,l=e.multiple,i=e.searchValue,u=e.toggleOpen,h=e.notFoundContent,g=e.direction,v=e.open,b=e.disabled,d=c.useRef(null),S=g==="rtl",m=c.useContext(_e),y=m.options,f=m.values,C=m.halfValues,p=m.fieldNames,x=m.changeOnSelect,T=m.onSelect,A=m.searchOptions,k=m.dropdownPrefixCls,I=m.loadData,O=m.expandTrigger,W=k||s,w=c.useState([]),_=oe(w,2),E=_[0],D=_[1],z=function(P){if(!(!I||i)){var j=Ee(P,y,p),H=j.map(function(ie){var ce=ie.option;return ce}),G=H[H.length-1];if(G&&!je(G,p)){var le=fe(P);D(function(ie){return[].concat(se(ie),[le])}),I(H)}}};c.useEffect(function(){E.length&&E.forEach(function(K){var P=Ln(K),j=Ee(P,y,p,!0).map(function(G){var le=G.option;return le}),H=j[j.length-1];(!H||H[p.children]||je(H,p))&&D(function(G){return G.filter(function(le){return le!==K})})})},[y,E,p]);var M=c.useMemo(function(){return new Set(Oe(f))},[f]),L=c.useMemo(function(){return new Set(Oe(C))},[C]),B=Un(l,v),X=oe(B,2),V=X[0],$=X[1],F=function(P){$(P),z(P)},U=function(P){if(b)return!1;var j=P.disabled,H=je(P,p);return!j&&(H||x||l)},te=function(P,j){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;T(P),!l&&(j||x&&(O==="hover"||H))&&u(!1)},ee=c.useMemo(function(){return i?A:y},[i,A,y]),q=c.useMemo(function(){for(var K=[{options:ee}],P=ee,j=Zt(P,p),H=function(){var ie=V[G],ce=P.find(function($e,xe){return(j[xe]?fe(j[xe]):$e[p.value])===ie}),be=ce==null?void 0:ce[p.children];if(!(be!=null&&be.length))return 1;P=be,K.push({options:be})},G=0;G<V.length&&!H();G+=1);return K},[ee,V,p]),J=function(P,j){U(j)&&te(P,je(j,p),!0)};qn(t,ee,p,V,F,J,{direction:g,searchValue:i,toggleOpen:u,open:v}),c.useEffect(function(){if(!i)for(var K=0;K<V.length;K+=1){var P,j=V.slice(0,K+1),H=fe(j),G=(P=d.current)===null||P===void 0?void 0:P.querySelector('li[data-path-key="'.concat(H.replace(/\\{0,2}"/g,'\\"'),'"]'));G&&Vn(G)}},[V,i]);var Y=!((a=q[0])!==null&&a!==void 0&&(a=a.options)!==null&&a!==void 0&&a.length),pe=[(n={},Z(n,p.value,"__EMPTY__"),Z(n,oa,h),Z(n,"disabled",!0),n)],ge=me(me({},e),{},{multiple:!Y&&l,onSelect:te,onActive:F,onToggleOpen:u,checkedSet:M,halfCheckedSet:L,loadingKeys:E,isSelectable:U}),Q=Y?[{options:pe}]:q,ve=Q.map(function(K,P){var j=V.slice(0,P),H=V[P];return c.createElement(Bn,lt({key:P},ge,{prefixCls:W,options:K.options,prevValuePath:j,activeValue:H}))});return c.createElement(zn,{open:v},c.createElement("div",{className:Te("".concat(W,"-menus"),(o={},Z(o,"".concat(W,"-menu-empty"),Y),Z(o,"".concat(W,"-rtl"),S),o)),ref:d},ve))}),Xn=c.forwardRef(function(e,t){var a=Nn();return c.createElement(ia,lt({},e,a,{ref:t}))});function Gn(){}function sa(e){var t,a=e,n=a.prefixCls,o=n===void 0?"rc-cascader":n,s=a.style,l=a.className,i=a.options,u=a.checkable,h=a.defaultValue,g=a.value,v=a.fieldNames,b=a.changeOnSelect,d=a.onChange,S=a.showCheckedStrategy,m=a.loadData,y=a.expandTrigger,f=a.expandIcon,C=f===void 0?">":f,p=a.loadingIcon,x=a.direction,T=a.notFoundContent,A=T===void 0?"Not Found":T,k=a.disabled,I=!!u,O=at(h,{value:g,postState:Ue}),W=oe(O,2),w=W[0],_=W[1],E=c.useMemo(function(){return Yt(v)},[JSON.stringify(v)]),D=aa(E,i),z=oe(D,3),M=z[0],L=z[1],B=z[2],X=ta(M,E),V=ra(I,w,L,B,X),$=oe(V,3),F=$[0],U=$[1],te=$[2],ee=Ke(function(Q){if(_(Q),d){var ve=Ue(Q),K=ve.map(function(H){return Ee(H,M,E).map(function(G){return G.option})}),P=I?ve:ve[0],j=I?K:K[0];d(P,j)}}),q=na(I,ee,F,U,te,L,B,S),J=Ke(function(Q){q(Q)}),Y=c.useMemo(function(){return{options:M,fieldNames:E,values:F,halfValues:U,changeOnSelect:b,onSelect:J,checkable:u,searchOptions:[],dropdownPrefixCls:void 0,loadData:m,expandTrigger:y,expandIcon:C,loadingIcon:p,dropdownMenuColumnStyle:void 0}},[M,E,F,U,b,J,u,m,y,C,p]),pe="".concat(o,"-panel"),ge=!M.length;return c.createElement(_e.Provider,{value:Y},c.createElement("div",{className:Te(pe,(t={},Z(t,"".concat(pe,"-rtl"),x==="rtl"),Z(t,"".concat(pe,"-empty"),ge),t),l),style:s},ge?A:c.createElement(ia,{prefixCls:o,searchValue:"",multiple:I,toggleOpen:Gn,open:!0,direction:x,disabled:k})))}var Qn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],Fe=c.forwardRef(function(e,t){var a=e.id,n=e.prefixCls,o=n===void 0?"rc-cascader":n,s=e.fieldNames,l=e.defaultValue,i=e.value,u=e.changeOnSelect,h=e.onChange,g=e.displayRender,v=e.checkable,b=e.autoClearSearchValue,d=b===void 0?!0:b,S=e.searchValue,m=e.onSearch,y=e.showSearch,f=e.expandTrigger,C=e.options,p=e.dropdownPrefixCls,x=e.loadData,T=e.popupVisible,A=e.open,k=e.popupClassName,I=e.dropdownClassName,O=e.dropdownMenuColumnStyle,W=e.dropdownStyle,w=e.popupPlacement,_=e.placement,E=e.onDropdownVisibleChange,D=e.onPopupVisibleChange,z=e.expandIcon,M=z===void 0?">":z,L=e.loadingIcon,B=e.children,X=e.dropdownMatchSelectWidth,V=X===void 0?!1:X,$=e.showCheckedStrategy,F=$===void 0?Qt:$,U=e.optionRender,te=Na(e,Qn),ee=Tn(a),q=!!v,J=at(l,{value:i,postState:Ue}),Y=oe(J,2),pe=Y[0],ge=Y[1],Q=c.useMemo(function(){return Yt(s)},[JSON.stringify(s)]),ve=aa(Q,C),K=oe(ve,3),P=K[0],j=K[1],H=K[2],G=at("",{value:S,postState:function(ne){return ne||""}}),le=oe(G,2),ie=le[0],ce=le[1],be=function(ne,Ne){ce(ne),Ne.source!=="blur"&&m&&m(ne)},$e=Hn(y),xe=oe($e,2),Xe=xe[0],He=xe[1],Re=Dn(ie,P,Q,p||o,He,u||q),Ge=ta(P,Q),Qe=ra(q,pe,j,H,Ge),De=oe(Qe,3),ke=De[0],Le=De[1],Ve=De[2],Je=c.useMemo(function(){var ue=Oe(ke),ne=ea(ue,j,F);return[].concat(se(Ve),se(H(ne)))},[ke,j,H,Ve,F]),Ae=Wn(Je,P,Q,q,g),Ie=Ke(function(ue){if(ge(ue),h){var ne=Ue(ue),Ne=ne.map(function(ka){return Ee(ka,P,Q).map(function(Aa){return Aa.option})}),Ze=q?ne:ne[0],et=q?Ne:Ne[0];h(Ze,et)}}),ga=na(q,Ie,ke,Le,Ve,j,H,F),Ye=Ke(function(ue){(!q||d)&&ce(""),ga(ue)}),va=function(ne,Ne){if(Ne.type==="clear"){Ie([]);return}var Ze=Ne.values[0],et=Ze.valueCells;Ye(et)},ba=A!==void 0?A:T,Ca=I||k,ya=_||w,Sa=function(ne){E==null||E(ne),D==null||D(ne)},wa=c.useMemo(function(){return{options:P,fieldNames:Q,values:ke,halfValues:Le,changeOnSelect:u,onSelect:Ye,checkable:v,searchOptions:Re,dropdownPrefixCls:p,loadData:x,expandTrigger:f,expandIcon:M,loadingIcon:L,dropdownMenuColumnStyle:O,optionRender:U}},[P,Q,ke,Le,u,Ye,v,Re,p,x,f,M,L,O,U]),gt=!(ie?Re:P).length,xa=ie&&He.matchInputWidth||gt?{}:{minWidth:"auto"};return c.createElement(_e.Provider,{value:wa},c.createElement(In,lt({},te,{ref:t,id:ee,prefixCls:o,autoClearSearchValue:d,dropdownMatchSelectWidth:V,dropdownStyle:me(me({},xa),W),displayValues:Ae,onDisplayValuesChange:va,mode:q?"multiple":void 0,searchValue:ie,onSearch:be,showSearch:Xe,OptionList:Xn,emptyOptions:gt,open:ba,dropdownClassName:Ca,placement:ya,onDropdownVisibleChange:Sa,getRawInputElement:function(){return B}})))});Fe.SHOW_PARENT=Qt;Fe.SHOW_CHILD=Jt;Fe.Panel=sa;function la(e,t){const{getPrefixCls:a,direction:n,renderEmpty:o}=c.useContext(Nt),s=t||n,l=a("select",e),i=a("cascader",e);return[l,i,s,o]}function ca(e,t){return c.useMemo(()=>t?c.createElement("span",{className:`${e}-checkbox-inner`}):!1,[t])}const ua=(e,t,a)=>{let n=a;a||(n=t?c.createElement(Ta,null):c.createElement(Ia,null));const o=c.createElement("span",{className:`${e}-menu-item-loading-icon`},c.createElement(Tt,{spin:!0}));return c.useMemo(()=>[n,o],[n])},da=e=>{const{prefixCls:t,componentCls:a}=e,n=`${a}-menu-item`,o=`
  &${n}-expand ${n}-expand-icon,
  ${n}-loading-icon
`;return[Sn(`${t}-checkbox`,e),{[a]:{"&-checkbox":{top:0,marginInlineEnd:e.paddingXS},"&-menus":{display:"flex",flexWrap:"nowrap",alignItems:"flex-start",[`&${a}-menu-empty`]:{[`${a}-menu`]:{width:"100%",height:"auto",[n]:{color:e.colorTextDisabled}}}},"&-menu":{flexGrow:1,flexShrink:0,minWidth:e.controlItemWidth,height:e.dropdownHeight,margin:0,padding:e.menuPadding,overflow:"auto",verticalAlign:"top",listStyle:"none","-ms-overflow-style":"-ms-autohiding-scrollbar","&:not(:last-child)":{borderInlineEnd:`${It(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&-item":Object.assign(Object.assign({},Pa),{display:"flex",flexWrap:"nowrap",alignItems:"center",padding:e.optionPadding,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationMid}`,borderRadius:e.borderRadiusSM,"&:hover":{background:e.controlItemBgHover},"&-disabled":{color:e.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"},[o]:{color:e.colorTextDisabled}},[`&-active:not(${n}-disabled)`]:{"&, &:hover":{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg}},"&-content":{flex:"auto"},[o]:{marginInlineStart:e.paddingXXS,color:e.colorTextDescription,fontSize:e.fontSizeIcon},"&-keyword":{color:e.colorHighlight}})}}}]},Jn=e=>{const{componentCls:t,antCls:a}=e;return[{[t]:{width:e.controlWidth}},{[`${t}-dropdown`]:[{[`&${a}-select-dropdown`]:{padding:0}},da(e)]},{[`${t}-dropdown-rtl`]:{direction:"rtl"}},Ea(e)]},ha=e=>{const t=Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2);return{controlWidth:184,controlItemWidth:111,dropdownHeight:180,optionSelectedBg:e.controlItemBgActive,optionSelectedFontWeight:e.fontWeightStrong,optionPadding:`${t}px ${e.paddingSM}px`,menuPadding:e.paddingXXS,optionSelectedColor:e.colorText}},fa=Oa("Cascader",e=>[Jn(e)],ha),Yn=e=>{const{componentCls:t}=e;return{[`${t}-panel`]:[da(e),{display:"inline-flex",border:`${It(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:e.borderRadiusLG,overflowX:"auto",maxWidth:"100%",[`${t}-menus`]:{alignItems:"stretch"},[`${t}-menu`]:{height:"auto"},"&-empty":{padding:e.paddingXXS}}]}},Zn=_a(["Cascader","Panel"],e=>Yn(e),ha);function er(e){const{prefixCls:t,className:a,multiple:n,rootClassName:o,notFoundContent:s,direction:l,expandIcon:i,disabled:u}=e,h=c.useContext(Pt),g=u??h,[v,b,d,S]=la(t,l),m=nt(b),[y,f,C]=fa(b,m);Zn(b);const p=d==="rtl",[x,T]=ua(v,p,i),A=s||(S==null?void 0:S("Cascader"))||c.createElement(Gt,{componentName:"Cascader"}),k=ca(b,n);return y(c.createElement(sa,Object.assign({},e,{checkable:k,prefixCls:b,className:Te(a,f,o,C,m),notFoundContent:A,direction:d,expandIcon:x,loadingIcon:T,disabled:g})))}var tr=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a};const{SHOW_CHILD:ar,SHOW_PARENT:nr}=Fe;function rr(e,t,a){const n=e.toLowerCase().split(t).reduce((l,i,u)=>u===0?[i]:[].concat(se(l),[t,i]),[]),o=[];let s=0;return n.forEach((l,i)=>{const u=s+l.length;let h=e.slice(s,u);s=u,i%2===1&&(h=c.createElement("span",{className:`${a}-menu-item-keyword`,key:`separator-${i}`},h)),o.push(h)}),o}const or=(e,t,a,n)=>{const o=[],s=e.toLowerCase();return t.forEach((l,i)=>{i!==0&&o.push(" / ");let u=l[n.label];const h=typeof u;(h==="string"||h==="number")&&(u=rr(String(u),s,a)),o.push(u)}),o},Me=c.forwardRef((e,t)=>{var a;const{prefixCls:n,size:o,disabled:s,className:l,rootClassName:i,multiple:u,bordered:h=!0,transitionName:g,choiceTransitionName:v="",popupClassName:b,dropdownClassName:d,expandIcon:S,placement:m,showSearch:y,allowClear:f=!0,notFoundContent:C,direction:p,getPopupContainer:x,status:T,showArrow:A,builtinPlacements:k,style:I,variant:O}=e,W=tr(e,["prefixCls","size","disabled","className","rootClassName","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow","builtinPlacements","style","variant"]),w=Ot(W,["suffixIcon"]),{getPopupContainer:_,getPrefixCls:E,popupOverflow:D,cascader:z}=c.useContext(Nt),{status:M,hasFeedback:L,isFormItemInput:B,feedbackIcon:X}=c.useContext(Ma),V=vn(M,T),[$,F,U,te]=la(n,p),ee=U==="rtl",q=E(),J=nt($),[Y,pe,ge]=Pn($,J),Q=nt(F),[ve]=fa(F,Q),{compactSize:K,compactItemClassnames:P}=$a($,p),[j,H]=mn("cascader",O,h),G=C||(te==null?void 0:te("Cascader"))||c.createElement(Gt,{componentName:"Cascader"}),le=Te(b||d,`${F}-dropdown`,{[`${F}-dropdown-rtl`]:U==="rtl"},i,J,Q,pe,ge),ie=c.useMemo(()=>{if(!y)return y;let Ae={render:or};return typeof y=="object"&&(Ae=Object.assign(Object.assign({},Ae),y)),Ae},[y]),ce=Ra(Ae=>{var Ie;return(Ie=o??K)!==null&&Ie!==void 0?Ie:Ae}),be=c.useContext(Pt),$e=s??be,[xe,Xe]=ua($,ee,S),He=ca(F,u),Re=On(e.suffixIcon,A),{suffixIcon:Ge,removeIcon:Qe,clearIcon:De}=En(Object.assign(Object.assign({},e),{hasFeedback:L,feedbackIcon:X,showSuffixIcon:Re,multiple:u,prefixCls:$,componentName:"Cascader"})),ke=c.useMemo(()=>m!==void 0?m:ee?"bottomRight":"bottomLeft",[m,ee]),Le=f===!0?{clearIcon:De}:f,[Ve]=Da("SelectLike",(a=w.dropdownStyle)===null||a===void 0?void 0:a.zIndex),Je=c.createElement(Fe,Object.assign({prefixCls:$,className:Te(!n&&F,{[`${$}-lg`]:ce==="large",[`${$}-sm`]:ce==="small",[`${$}-rtl`]:ee,[`${$}-${j}`]:H,[`${$}-in-form-item`]:B},gn($,V,L),P,z==null?void 0:z.className,l,i,J,Q,pe,ge),disabled:$e,style:Object.assign(Object.assign({},z==null?void 0:z.style),I)},w,{builtinPlacements:_n(k,D),direction:U,placement:ke,notFoundContent:G,allowClear:Le,showSearch:ie,expandIcon:xe,suffixIcon:Ge,removeIcon:Qe,loadingIcon:Xe,checkable:He,dropdownClassName:le,dropdownPrefixCls:n||F,dropdownStyle:Object.assign(Object.assign({},w.dropdownStyle),{zIndex:Ve}),choiceTransitionName:vt(q,"",v),transitionName:vt(q,"slide-up",g),getPopupContainer:x||_,ref:t}));return ve(Y(Je))}),ir=Mn(Me,"dropdownAlign",e=>Ot(e,["visible"]));Me.SHOW_PARENT=nr;Me.SHOW_CHILD=ar;Me.Panel=er;Me._InternalPanelDoNotUseOrYouWillBeFired=ir;var sr=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return c.useMemo(function(){return e.apply(void 0,t)},t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function lr(){const{isPending:e,mutateAsync:t}=Et({mutationFn:async a=>_t(`pro_webhooks/${a.webhook_id}/update`,{flow_id:a.flow_id},void 0,"POST"),mutationKey:["updateWebhook"]});return{isUpdatingWebhook:e,updateWebhook:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ot(e){const t={};if(!Array.isArray(e))return{};for(const a of e)a.dType===Ct.COLLECTION?t[a.label]=ot(a.value):a.dType===Ct.ARRAY?t[`${a.label}`]=ot(a.value):t[a.label]=a.value;return t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pa({wrapperClassName:e}){var v;const t=Number((v=qe())==null?void 0:v.flowId),{id:a}=Se(ct),[n,o]=Mt(ft(a)),[s,l]=c.useState(!1),{isListening:i,startHookListen:u,stopHookListen:h}=ln({listenerType:"CAPTURE",onSuccess:({code:b,data:d})=>{b!=="SUCCESS"||Array.isArray(d)||(l(!0),o(S=>pt(S,m=>{m.variables=cn(d.variables)})))},params:{flowId:t,nodeId:a}}),{formattedTime:g}=un({durationInSeconds:180,isActive:i,onComplete:h});if(c.useEffect(()=>{l(!1)},[n.machineSlug]),!Number.isNaN(t))return R("div",{className:$t([e,"grid justify-items-start gap-3"]),children:[r(ae,{conditions:!i,children:r(ye,{icon:r(La,{size:16}),onClick:u,type:"primary",children:N("Listen Response")})}),r(ae,{conditions:i,children:R(ut,{align:"baseline",children:[r(ye,{icon:r(Va,{size:16}),onClick:h,type:"primary",children:N("Stop")}),r(Tt,{size:16}),R(re.Text,{children:[N("Listening"),"..."]}),r(re.Text,{type:"secondary",children:g})]})}),r(ae,{conditions:[!n.variables||!n.variables.length],children:r(tt,{description:r("span",{dangerouslySetInnerHTML:{__html:N("Click the <b>Listen Response</b> button and submit your trigger. The captured response will be displayed below. The listener will stop automatically after <b>3 minutes</b>.")}}),type:"warning"})}),r(ae,{conditions:s,children:r(tt,{className:"w-full",message:N("Response captured"),showIcon:!0,type:"success"})}),r(ae,{conditions:[n.variables&&n.variables.length],children:r(tt,{className:"border-sky-300 bg-sky-100 text-sky-800 dark:border-sky-800 dark:bg-sky-950 dark:text-sky-100",description:N("Use a Condition node immediately after the Trigger node to filter the hook responses—like Form ID, Page ID, or other criteria—so that only the relevant data continues in the workflow."),icon:r(ja,{size:16}),showIcon:!0})}),R(ae,{conditions:n.variables&&n.variables.length,children:[r(re.Title,{className:"mb-0.5",level:5,children:N("Captured Response")}),r(bt,{className:"max-h-[270px] text-xs",data:ot(n.variables)})]}),n.appSlug==="webhook"&&R(dt,{children:[r(re.Title,{className:"mb-0 mt-2",level:5,children:N("Instant Webhook Response")}),R(ze.Group,{defaultValue:"a",size:"small",children:[r(ze.Button,{value:"a",children:N("Default Response")}),r(Be,{title:N("Custom response feature is not available yet. But planned."),children:r(ze.Button,{disabled:!0,value:"d",children:N("Custom Response")})}),r(Be,{title:N("Custom response feature is not available yet. But planned."),children:r(ze.Button,{disabled:!0,value:"d",children:N("Disable")})})]}),r(bt,{className:"text-xs",data:{code:"SUCCESS",data:"Accepted",status:"success"}})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function cr(e){const t=Rt(),{isPending:a,mutateAsync:n}=Et({mutationFn:async o=>_t("pro_webhooks/save",o,void 0,"POST"),mutationKey:["saveWebhook"],onSuccess:o=>{o.data&&t.setQueryData(["webhooks",e||"all",o.data.app_slug||"all"],s=>s&&{...s,data:[...s.data||[],o.data]})}});return{isSavingWebhook:a,saveWebhook:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Title:ur}=re;function dr({appSlug:e,children:t,onPopoverToggle:a,onSave:n,onValidate:o,onWebhookChange:s}){var f;const l=Number((f=qe())==null?void 0:f.flowId),[i,u]=c.useState(!1),{isSavingWebhook:h,saveWebhook:g}=cr(l),[v,b]=c.useState({app_slug:e,title:N("Untitled Webhook")}),d=()=>{u(C=>(a==null||a(!C),!C))},S=()=>{u(!1),a==null||a(!1)},m=C=>p=>{b(x=>pt(x,T=>{T[C]=p.target.value}))};return r(Ut,{content:r(yn,{onFinish:async()=>{if(o&&o(v)===!1)return;const{data:C}=await g({...v,flow_id:l});s({id:C.id,url:C.url}),n==null||n(C),S(),b({app_slug:e,title:N("Untitled Webhook")})},children:R(ut,{direction:"vertical",children:[r(Bt,{disabled:h,label:N("Webhook name"),onChange:m("title"),required:!0,value:v.title}),t,R(Xt,{gap:8,justify:"end",children:[r(ye,{onClick:S,children:N("Cancel")}),r(ye,{htmlType:"submit",loading:h,type:"primary",children:"Save"})]})]})}),open:i,placement:"right",title:R(bn,{justify:"space-between",children:[r(ur,{css:Cn({mb:"0*"}),level:5,children:N("Create a webhook")}),r(ye,{disabled:h,icon:r(ht,{}),onClick:S,size:"small",type:"text"})]}),trigger:"click",children:r(Be,{title:N("Add new webhook"),children:r(ye,{onClick:d,children:N("Add Webhook")})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function hr({appSlug:e,children:t,invalidMessage:a,onPopoverToggle:n,onRender:o,onSave:s,onValidate:l,onWebhookChange:i,status:u,value:h,wrapperClassName:g}){var C;const v=Number((C=qe())==null?void 0:C.flowId),{isWebhookLoading:b,webhooks:d}=sn(v,e),{updateWebhook:S}=lr();c.useEffect(()=>{o==null||o()},[]);const m=c.useMemo(()=>d.map(p=>({label:p.title,value:p.id})),[d]),y=()=>{var p;return((p=d.find(x=>x.id===h))==null?void 0:p.url)||""},f=async p=>{var T;const x=((T=d.find(A=>A.id===p))==null?void 0:T.url)||"";i({id:p,url:x}),S({flow_id:v,webhook_id:p})};if(!Number.isNaN(v))return R("div",{className:"grid gap-3",children:[r(Kt,{invalidMessage:a,label:N("Webhook"),loading:b,onChange:f,optionFilterProp:"label",options:m,placeholder:N("Choose a webhook"),showSearch:!0,status:u,suffix:r(dr,{appSlug:e,onPopoverToggle:n,onSave:s,onValidate:l,onWebhookChange:i,children:t},`webhook-popover-${v}-${e}`),value:h,wrapperClassName:$t([g,"w-100"])}),h&&R(dt,{children:[r(Ft,{label:N("Callback URL"),value:y()}),r(pa,{})]})]},`${v}-${e}`)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function St({icon:e,iconSize:t,label:a,onRender:n,text:o,tooltip:s,wrapperClassName:l,...i}){const u=c.useId(),{token:h}=Dt.useToken(),g=e||void 0;return c.useEffect(()=>{n==null||n()},[]),R("div",{className:l,children:[r("label",{className:"d-ib mb-1",css:Lt({color:h.colorText,minHeight:22},"",""),htmlFor:u,children:a||""}),r(Be,{title:s,children:r(ye,{id:u,...g?{icon:r(g,{size:t})}:{},"data-testid":"btnComponent",...i,children:o})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fr={a:({children:e,href:t})=>r("a",{className:"text-blue-500 decoration-wavy hover:underline",href:t,rel:"noreferrer",target:"_blank",children:e}),code:({children:e})=>r("code",{className:"rounded bg-gray-200 p-1 dark:bg-slate-700 dark:text-slate-50",children:e}),h1:({children:e})=>r("h1",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),h2:({children:e})=>r("h2",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),h3:({children:e})=>r("h3",{className:"text-sm font-bold text-slate-600 dark:text-slate-200",children:e}),hr:()=>r("hr",{className:"my-2 border-b-0 border-t border-slate-300 dark:border-slate-600"}),p:({children:e})=>r("p",{className:"m-0 text-gray-600 dark:text-slate-100",children:e})};function ma({className:e,note:t,onRender:a}){c.useEffect(()=>{a==null||a()},[]);const n=Array.isArray(t)?t.join(`
`):t;return r("div",{className:we(["rounded border border-solid px-2 py-1 text-sm","border-slate-200 bg-slate-100 text-gray-500","dark:border-slate-800 dark:bg-slate-900 dark:text-gray-300",e]),children:r(wn,{components:fr,children:n})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:wt}=re;function pr({direction:e="horizontal",helperText:t,invalidMessage:a,label:n,onRender:o,wrapperClassName:s,...l}){const i=c.useId(),{token:u}=Dt.useToken();c.useEffect(()=>{o==null||o()},[]);const h=e==="vertical";return R("div",{className:s,children:[R("div",{className:we(["flex",h?"flex-col-reverse items-start":"items-center"]),children:[r(xn,{className:"","data-testid":"switchComponent",id:i,...l}),n&&r("label",{className:we(["font-medium",h?"mb-1":"ml-2"]),css:Lt({color:u.colorText},"",""),htmlFor:i,children:n})]}),a&&r(wt,{type:"danger",children:a}),!a&&t&&r(wt,{type:"secondary",children:t})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xt=c.memo(it);function it({appName:e,appSlug:t,component:a,index:n,nodeId:o,parentComponentIndex:s}){const l=c.useRef(!1),{handleComponentsEvents:i,handleComponentsEventsAsync:u}=Ht(o),h=(f,C,p)=>typeof f=="boolean"?f:i(f,C,p,s)();c.useEffect(()=>{const f=setTimeout(()=>{l.current=!0},100);return()=>{l.current=!1,clearTimeout(f)}},[]);const{componentGroupId:g,componentName:v,fieldType:b,id:d,render:S,...m}=a,y=h(S,n,d);return r(Fa,{children:(()=>{if(v===de.select&&y){const{onChange:f,onLoadData:C,onRefetch:p,onRender:x,...T}=m;return r(he,{enableAnimate:l.current,children:r(Kt,{...x&&{onRender:i(x,n,d,s)},...f&&{onChange:i(f,n,d,s)},...C&&{onLoadData:u(C,n,d,s)},...p&&{suffix:r(St,{icon:Wa,loading:a.loading,onClick:i(p,n,d,s),tooltip:a.loading?"Refetching...":"Refetch List"})},...T})})}if(a.componentName===de.input&&y){const{onChange:f,onRender:C,...p}=m;return r(he,{enableAnimate:l.current,children:r(Bt,{...C&&{onRender:i(C,n,d,s)},...f&&{onChange:i(f,n,d,s)},...p})})}if(a.componentName===de.button&&y){const{onClick:f,onRender:C,...p}=m;return r(he,{enableAnimate:l.current,children:r(St,{...C&&{onRender:i(C,n,d,s)},...f&&{onClick:i(f,n,d,s)},...p})})}if(a.componentName===de.mixInput&&y){const{onChange:f,onRender:C,...p}=m;return r(he,{enableAnimate:l.current,children:r(pn,{...C&&{onRender:i(C,n,d,s)},...f&&{onChange:i(f,n,d,s)},...p})})}if(a.componentName===de.note&&y&&t){const{...f}=m;return r(he,{enableAnimate:l.current,children:r(ma,{...f})})}if(a.componentName===de.connection&&y&&t){const{extraComponents:f,onConnectionAddChange:C,onConnectionChange:p,onRender:x,onValidate:T,...A}=m;return r(he,{enableAnimate:l.current,children:r(rn,{appName:e||"",appSlug:t,onConnectionChange:i(p,n,d,s),...C&&{onConnectionAddChange:i(C,n,d,s)},...T&&{onValidate:i(T,n,d,s)},...x&&{onRender:i(x,n,d,s)},...A,children:(f==null?void 0:f.length)&&f.map((k,I)=>r(it,{appSlug:t,component:k,index:I,nodeId:o,parentComponentIndex:n},`extra-component-${I}-${k.id}`))})})}if(a.componentName===de.repeaterField&&y){const{labelActionOnClick:f,onChange:C,onRender:p,...x}=m;return r(he,{enableAnimate:l.current,children:r(on,{...p&&{onRender:i(p,n,d,s)},...C&&{onChange:i(C,n,d,s)},...f&&{labelActionOnClick:i(f,n,d,s)},...x})})}if(a.componentName===de.webhook&&y&&t){const{extraComponents:f,onPopoverToggle:C,onRender:p,onSave:x,onValidate:T,onWebhookChange:A,...k}=m;return r(he,{enableAnimate:l.current,children:r(hr,{appSlug:t,onWebhookChange:i(A,n,d,s),...p&&{onRender:i(p,n,d,s)},...C&&{onPopoverToggle:i(C,n,d,s)},...x&&{onSave:i(x,n,d,s)},...T&&{onValidate:i(T,n,d,s)},...k,children:(f==null?void 0:f.length)&&f.map((I,O)=>r(it,{appSlug:t,component:I,index:O,nodeId:o,parentComponentIndex:n},`extra-component-${O}-${I.id}`))})})}if(a.componentName===de.hookListener&&y)return r(he,{enableAnimate:l.current,children:r(pa,{})});if(a.componentName===de.InputCopyable&&y)return r(he,{enableAnimate:l.current,children:r(Ft,{label:a==null?void 0:a.label,value:a==null?void 0:a.value})});if(a.componentName===de.switch&&y){const{onChange:f,onClick:C,onRender:p,...x}=m;return r(he,{enableAnimate:l.current,children:r(pr,{...p&&{onRender:i(p,n,d,s)},...f&&{onChange:i(f,n,d,s)},...C&&{onClick:i(C,n,d,s)},...x})})}})()})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};var mr={name:"1d3w5wq",styles:"width:100%"};function gr({appName:e,appSlug:t,components:a,machineSlug:n,nodeId:o}){const{handleMachineEvent:s}=Ht(o);c.useEffect(()=>{!Array.isArray(a)||a.length===0||s("ON_MACHINE_LOAD")},[n,a==null?void 0:a.length]);const l=new Map,i=new Map;return r("div",{className:"grid gap-3",children:a==null?void 0:a.map((u,h)=>{if("componentGroupId"in u&&!i.has(u.id)){const g=u.componentGroupId,v=[],b=a.filter((d,S)=>{if(d.componentGroupId===g)return v.push(S),!0});return r(ut.Compact,{css:mr,children:b.map(d=>{if(!i.has(d.id)){if(l.has(d.id)){console.error(`Component id ${d.id} is duplicated`,l,i);return}return l.set(d.id,1),i.set(d.id,1),r("div",{className:d.groupItemClassName,style:d.groupItemStyle,children:r(xt,{appName:e,appSlug:t,component:d,index:v.shift()||0,nodeId:o})},d.id+t+n)}})},`${g}${t}${n}`)}if(!i.has(u.id)){if(l.has(u.id)){console.error(`Component id ${u.id} is duplicated`,l,i);return}return l.set(u.id,1),i.set(u.id,1),r(xt,{appName:e,appSlug:t,component:u,index:h,nodeId:o},u.id+t+n)}})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function vr(e,t,a,n){const o=Ya(t,e,a);return t&&o.length===0?[]:t&&o.length>0?kt(o,a,n):kt(e,a,n)}function br(){return R("div",{className:"mt-10 flex w-11/12 flex-col items-center text-xs",children:[r("span",{className:"text-slate-500",children:r(Ha,{size:46})}),r("span",{className:"mt-2 font-medium",children:N("Have a integration request ?")}),R("span",{className:"mt-1 text-slate-500",children:[N("Join our "),r("a",{className:"text-blue-500 underline",href:qt.integrationRequest,rel:"noreferrer noopener nofollow",target:"_blank",children:N("forum discussion")})," ",r("br",{})," ",N("and ask for new integration")]})]})}function Cr({app:e}){return R("div",{className:"flex items-center gap-2",children:[r(zt,{alt:`${e.name} icon`,color:e.color,padding:3,size:35,src:e.logoUrl}),r(re.Text,{className:"text-wrap",children:e.name})]},e.appSlug)}function kt(e,t,a){return e.reduce((n,o)=>{const s=[...o.actions,...o.triggers].reduce((l,i)=>(i.runType===t&&!i.isComingSoon&&l.push({disabled:i.isPro&&!Vt.IS_PRO,label:r(yr,{action:i,selectedMachineLoading:a}),value:i.machineSlug}),l),[]);return s.push({label:r(br,{}),value:""}),s.length>1&&n.push({children:s,label:r(Cr,{app:o}),value:o.appSlug}),n},[])}function yr({action:e,selectedMachineLoading:t}){return R("div",{children:[R(re.Text,{className:"flex items-center gap-3 text-wrap",children:[e.label,r(ae,{conditions:e.machineSlug===t,children:r(jt,{className:"animate-spin",size:16})})]}),r(We,{className:"text-xs capitalize",color:e.runType==="action"?"purple":"orange",children:Za[e.runType]}),r(ae,{conditions:e.isPro&&!Vt.IS_PRO,children:r(We,{className:"text-xs",color:"gold-inverse",children:N("Pro")})}),r(ae,{conditions:e.isComingSoon,children:r(We,{className:"text-xs",color:"purple-inverse",children:N("Coming Soon")})})]},e.machineSlug)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Sr=sr(vr),st=240;function wr({setIsMachinePopoverOpen:e}){const{id:t,type:a}=Se(ct),n=Number(qe().flowId),[o,s]=Mt(ft(t)),{appSlug:l,machineSlug:i}=o,[u,h]=c.useState(""),g=Se(en),v=Se(za),[b,d]=c.useState(""),[S,m]=c.useState(""),y=kn(_=>m(_),300),[f,C]=c.useState([(o==null?void 0:o.appSlug)||"",(o==null?void 0:o.machineSlug)||""]),p=c.useRef(null),x=Ka(tn),T=!!f[0],A=Rt(),k=_=>{var E,D;d(_.target.value),y(_.target.value),(D=(E=p.current)==null?void 0:E.querySelector(".ant-cascader-menu"))==null||D.scrollTo({behavior:"smooth",top:0})},[I,O]=c.useState([]);c.useEffect(()=>{g.length&&O(g)},[g]);const W=Sr(I,S,a,u),w=async _=>{const[E,D]=_;if(D===i&&E===l||(C([E,D]),!E||!D))return;const M=g.find(({appSlug:$})=>$===E),L=[...(M==null?void 0:M.actions)||[],...(M==null?void 0:M.triggers)||[]].find(({machineSlug:$})=>$===D);h(D);const B=L==null?void 0:L.triggerType;if(!M||!L||!B){console.error(`Machine or App ${E} -> ${D} -> ${B}`);return}const X={appColor:M.color,appIcon:M.logoUrl,appSlug:M.appSlug,appTitle:M.name,isPro:L.isPro,machineLabel:L.label,machineSlug:L.machineSlug,runType:L.runType,states:{components:[],connections:[]},topBanner:L.topBanner,triggerType:B,variables:void 0},V=an(n,t,X);await Ua("node/save",V),A.removeQueries({queryKey:["flow_node",t]}),s(X),h(""),a==="trigger"&&x($=>pt($,F=>{F.triggerType=B})),e(!1)};return r(dn,{children:R("div",{ref:p,style:{maxWidth:T?"inherit":st},children:[r("div",{className:"px-2",children:r(An,{allowClear:!0,className:"mb-2 w-full bg-gray-950 bg-opacity-10 focus:bg-opacity-100 dark:bg-slate-950 dark:bg-opacity-40",onChange:k,placeholder:N("Search"),prefix:r(Ba,{size:19}),size:"small",value:b})}),R("div",{className:we([T&&"grid-cols-2","mb-1 grid border-0 border-b border-solid border-slate-300 px-5 dark:border-gray-700"]),children:[r(re.Text,{className:"text-xs text-gray-500",children:N("Apps")}),r(ae,{conditions:T&&I.length,children:r(re.Text,{className:"ml-5 text-xs text-gray-500",children:N("Integrations")})})]}),r(Me.Panel,{changeOnSelect:!0,className:"h-[calc(92vh-100px)] min-w-full rounded-none border-none",css:kr(v),notFoundContent:r(Ar,{query:b}),onChange:w,options:W,value:f[1]?f:[f[0]]})]})})}const xr=c.memo(wr);function kr(e){return{"& .ant-cascader-menu":{maxWidth:st,minWidth:st,paddingBottom:100},"& .ant-cascader-menu-item-active":{"&::before":{background:e?"#fff":"#000",borderRadius:100,content:'""',height:"40%",inset:0,left:2,marginBlock:"auto",position:"absolute",top:0,width:3},backgroundColor:e?"#3e3a50":"#ced2dd",position:"relative"}}}function Ar({query:e}){return R("div",{className:"flex w-full flex-col items-center gap-2 p-4",children:[r(ht,{className:"dark:text-slate-400",size:39}),Wt(N('No apps found for "%s"'),e),r("br",{}),R(re.Text,{children:[N("Request for new Integration "),R("a",{className:"text-blue-600 underline",href:qt.integrationRequest,rel:"noopener noreferrer nofollow",target:"_blank",children:[N("here"),r(qa,{size:14})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Nr({actionName:e,appColor:t,appIcon:a,appName:n,type:o}){const[s,l]=c.useState(!1),{isDarkTheme:i,preferNodeDetailsInDrawer:u}=Se(Xa);c.useLayoutEffect(()=>{n&&e||setTimeout(()=>{l(!0)},100)},[e,n]);const h=s?Ga:Qa;return r(Ut,{classNames:{root:"mt-2"},content:r(xr,{setIsMachinePopoverOpen:l}),destroyTooltipOnHide:!0,onOpenChange:g=>l(g),open:s,placement:u?"left":"right",styles:{body:Tr(i)},title:R(Xt,{className:"px-3 pt-2",justify:"space-between",children:[r(re.Title,{className:"m-0",level:5,children:N("Select App & Action")}),r(ye,{"aria-label":N("Close Popup"),icon:r(ht,{}),onClick:()=>l(!1),size:"small",type:"text"})]}),trigger:"click",children:R("button",{"aria-label":N("Open App & Action Popup"),className:we(["flex cursor-pointer items-center gap-3 border-0 bg-transparent px-1 ring-gray-900 focus-visible:ring-4","rounded-sm outline-8 outline-slate-200 hover:bg-slate-200 hover:outline dark:outline-gray-900 dark:hover:bg-gray-900",s&&"bg-slate-200 outline dark:bg-gray-900"]),type:"button",children:[r(ae,{conditions:u,children:r(h,{className:"text-gray-500",size:18})}),r(zt,{alt:n,color:t,size:50,src:a}),R("div",{className:"text-left",children:[r(re.Title,{className:"m-0",level:4,children:n||N("Select App")}),r(re.Title,{className:"m-0 cursor-pointer capitalize",level:5,children:e||Wt(N("Select %s"),o)})]}),r(ae,{conditions:!u,children:r(h,{className:"text-gray-500",size:18})})]})})}function Tr(e){return{backdropFilter:"blur(12px)",background:e?"#2f2e35b3":"#fffc",border:`2px solid ${e?"#44434D":"#e8e8e8"}`,marginTop:15,padding:0}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function co(){var S,m;const{id:e,type:t}=Se(ct),a=Se(Ja),n=Se(ft(e)),{appColor:o,appIcon:s,appSlug:l,appTitle:i,machineLabel:u,machineSlug:h,states:g,topBanner:v}=n,{isNodeDetailsFetching:b,isNodeDetailsLoading:d}=hn(e,l||"",h||"",((S=g==null?void 0:g.components)==null?void 0:S.length)||0);return R(dt,{children:[R("div",{className:"-mt-4 mb-4",children:[R("div",{className:"flex items-center pb-1",children:[r(We,{className:we([a?"ml-8":"ml-1","text-xs capitalize"]),color:t==="action"?"blue":"orange",children:t}),r(We,{className:"min-w-6 text-center font-mono text-xs",children:nn(e)}),r(ae,{conditions:b,children:r(jt,{className:"animate-spin",size:18})})]}),r(Nr,{actionName:u,appColor:o,appIcon:s,appName:i,type:t})]}),r(ae,{conditions:[!d,v,v==null?void 0:v.length],children:r(ma,{className:"mb-2",note:(n==null?void 0:n.topBanner)||""},`note-${l}-${u}-${i}`)}),r(ae,{conditions:d&&!b||!((m=n==null?void 0:n.states)!=null&&m.components.length)&&b,children:Array.from({length:2}).map((y,f)=>R("div",{className:"mb-4",children:[r(yt,{active:!0,className:"w-56",paragraph:!1}),r(yt.Input,{active:!0,block:!0})]},`sk-${f}`))}),r("div",{className:we([b&&"cursor-wait opacity-80"]),children:r("div",{className:we([b&&"pointer-events-none"]),children:!d&&(g==null?void 0:g.components)&&r(gr,{appName:i,appSlug:l,components:g.components,machineSlug:h,nodeId:e})})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{co as default};
